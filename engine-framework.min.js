!function e(t,i,r){function n(o,a){if(!i[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return n(i?i:e)},c,c.exports,e,t,i,r)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(e,t,i){e("./src"),e("../builtin/fire-assets/asset")},{"../builtin/fire-assets/asset":5,"./src":55}],2:[function(e,t,i){var r=Fire.Class({name:"Fire.AudioClip","extends":Fire.RawAsset});Fire.AudioClip=r,t.exports=r},{}],3:[function(e,t,i){var r=Fire.Class({name:"Fire.BitmapFont","extends":Fire.RawAsset});Fire.BitmapFont=r,t.exports=r},{}],4:[function(e,t,i){var r=Fire.Class({name:"Fire.CoffeeScript","extends":Fire.RawAsset});Fire.CoffeeScript=r,t.exports=r},{}],5:[function(e,t,i){e("./texture"),e("./sprite"),e("./bitmap-font"),e("./ttf-font"),e("./javascript"),e("./coffeescript"),e("./scene"),e("./audio-clip")},{"./audio-clip":2,"./bitmap-font":3,"./coffeescript":4,"./javascript":6,"./scene":7,"./sprite":8,"./texture":9,"./ttf-font":10}],6:[function(e,t,i){var r=Fire.Class({name:"Fire.JavaScript","extends":Fire.RawAsset});Fire.JavaScript=r,t.exports=r},{}],7:[function(e,t,i){var r=Fire.Class({name:"Fire.Scene","extends":Fire.Asset,properties:{scene:null}});Fire.Scene=r,t.exports=r},{}],8:[function(e,t,i){var r=Fire.Class({name:"Fire.Sprite","extends":Fire.Asset,constructor:function(){var e=arguments[0];e&&(this.texture=e.src,this.width=e.width,this.height=e.height)},properties:{pivot:{"default":new Fire.Vec2(.5,.5),tooltip:"The pivot is normalized, like a percentage.\n(0,0) means the bottom-left corner and (1,1) means the top-right corner.\nBut you can use values higher than (1,1) and lower than (0,0) too."},trimX:{"default":0,type:Fire.Integer},trimY:{"default":0,type:Fire.Integer},width:{"default":0,type:Fire.Integer},height:{"default":0,type:Fire.Integer},texture:{"default":"",url:Fire.Texture,visible:!1},rotated:{"default":!1,visible:!1},x:{"default":0,type:Fire.Integer,visible:!1},y:{"default":0,type:Fire.Integer,visible:!1},rawWidth:{"default":0,type:Fire.Integer,visible:!1},rawHeight:{"default":0,type:Fire.Integer,visible:!1},pixelLevelHitTest:{"default":!1,tooltip:"Use pixel-level hit testing."},alphaThreshold:{"default":.1,tooltip:"The highest alpha channel value that is considered opaque for hit test.",watch:{pixelLevelHitTest:function(e,t){t.disabled=!e.pixelLevelHitTest}}},borderTop:{"default":0,type:Fire.Integer},borderBottom:{"default":0,type:Fire.Integer},borderLeft:{"default":0,type:Fire.Integer},borderRight:{"default":0,type:Fire.Integer},rotatedWidth:{get:function(){return this.rotated?this.height:this.width}},rotatedHeight:{get:function(){return this.rotated?this.width:this.height}}}});Fire.Sprite=r,t.exports=r},{}],9:[function(e,t,i){t.exports=function(){var e=Fire.defineEnum({Repeat:-1,Clamp:-1}),t=Fire.defineEnum({Point:-1,Bilinear:-1,Trilinear:-1}),i=Fire.Class({name:"Fire.Texture","extends":Fire.RawAsset,constructor:function(){var e=arguments[0];e&&(this.width=e.width,this.height=e.height)},properties:{width:{"default":0,type:Fire.Integer,readonly:!0},height:{"default":0,type:Fire.Integer,readonly:!0},wrapMode:{"default":e.Clamp,type:e,readonly:!0},filterMode:{"default":t.Bilinear,type:t,readonly:!0}}});return i.WrapMode=e,i.FilterMode=t,Fire.Texture=i,i}()},{}],10:[function(e,t,i){var r=Fire.Class({name:"Fire.TTFFont","extends":Fire.Asset,properties:{fontFamily:{"default":""}}});Fire.TTFFont=r,t.exports=r},{}],11:[function(e,t,i){t.exports={name:"engine-framework",version:"0.1.0",description:"A simple framework for connecting Fireball Editor and other game engines",homepage:"http://fireball-x.com",repository:{type:"git",url:"https://github.com/fireball-x/engine-framework.git"},author:"Firebox Technology",license:"MIT",bugs:"https://github.com/fireball-x/editor-framework/issues",scripts:{test:"gulp test"},dependencies:{"node-uuid":"1.4.2"},devDependencies:{browserify:"10.2.3",del:"1.2.0",gulp:"3.8.11","gulp-cached":"1.0.1","gulp-fb":"0.0.9","gulp-header":"1.2.2","gulp-jshint":"1.11.0","gulp-mirror":"0.4.0","gulp-plumber":"0.6.6","gulp-rename":"1.2.2","gulp-sourcemaps":"1.5.2","gulp-uglify":"1.2.0","gulp-util":"3.0.5","jshint-stylish":"2.0.0","require-dir":"0.1.0","vinyl-buffer":"1.0.0","vinyl-source-stream":"1.0.0"}}},{}],12:[function(e,t,i){function r(e,t,i){this.readMainCache=!1,this.writeMainCache=!1;var r=!(this.readMainCache&&this.writeMainCache);this.taskIndieCache=r?{}:null,this.assetsNeedPostLoad=i?[]:null,this.urlsNeedPreload={}}var n=e("./js"),s=(Fire.Asset,e("./utils").callInNextTick),o=e("./load-manager"),a=e("./loaders").JsonLoader,u="",l="",c={},f=new Fire.CallbacksInvoker,d=new Fire._DeserializeInfo;r.prototype.readCache=function(e){return this.readMainCache&&this.writeMainCache?h._uuidToAsset[e]:this.readMainCache?h._uuidToAsset[e]||this.taskIndieCache[e]:this.taskIndieCache[e]},r.prototype.writeCache=function(e,t,i){this.writeMainCache&&(h._uuidToAsset[e]=t),this.taskIndieCache&&(this.taskIndieCache[e]=t),this.assetsNeedPostLoad&&t._rawFiles&&!i&&this.assetsNeedPostLoad.push(t)};var h={loadAsset:function(e,t,i,n,s){i="undefined"!=typeof i?i:!0,n="undefined"!=typeof n?n:!0;var o=new r(i,n);this._loadAssetByUuid(e,t,o,s)},_LoadingHandle:r,getImportedDir:function(e){return u+e.slice(0,2)},_queryAssetInfoInEditor:function(e,t){},_getAssetInfoInRuntime:function(e){var t=c[e];if(t)return{url:l+t.url,raw:t.raw};var i=this.getImportedDir(e)+Fire.Path.sep+e+".json";return{url:i,raw:!1}},queryAssetInfo:function(e,t){var i=this._getAssetInfoInRuntime(e);t(null,i.url,i.raw)},parseUuidInEditor:function(e){},_loadAssetByUuid:function(e,t,i,r){function n(n,s,o){function a(r,n,s){n&&(n._uuid=e,i.writeCache(e,n,s)),l?f.invokeAndRemove(e,r,n):t&&t(r,n)}s?h._deserializeWithDepends(s,o,a,i,r):a(n,null)}if("string"!=typeof e)return void s(t,new Error("[AssetLibrary] uuid must be string"),null);if(!r){var u=i.readCache(e);if(u)return void s(t,null,u)}var l=i.readMainCache&&!r;if(!l||f.add(e,t)){var c=this._getAssetInfoInRuntime(e);return c.raw?Fire.error("Should not load raw file in AssetLibrary"):void o.loadByLoader(a,c.url,function(e,t){n(e,t,c.url)})}},loadJson:function(e,t,i,n){var o=new r(!i,!i,n),a=!0;return this._deserializeWithDepends(e,"",function(e,i){a?s(t,e,i):t(e,i)},o),a=!1,o},_deserializeWithDepends:function(e,t,i,r,s){var a=function(e){var t=n._getClassById(e);return t?t:(Fire.warn('Can not get class "%s"',e),Object)},u=Fire.deserialize(e,d,{classFinder:a,target:s}),l=d.uuidList.length,c=d.rawProp;if(c){var f=Fire.attr(u.constructor,d.rawProp),p=f.rawType;++l,o.load(t,p,u._rawext,function(e,r){e&&Fire.error("[AssetLibrary] Failed to load %s of %s. %s",p,t,e),u[c]=r,--l,0===l&&i(null,u,!0)})}if(0===l)return i(null,u,!!c),void d.reset();for(var y=0,g=d.uuidList.length;g>y;y++){var _=d.uuidList[y];!function(e,t,n){h.queryAssetInfo(e,function(s,o,a){if(a)return t[n]=o,r.urlsNeedPreload[o]=!0,--l,void(i&&0===l&&(i(null,u,!!c),i=null));var f=function(e,r,s){t[n]=r,--l,i&&0===l&&(i(null,u,!!c),i=null)};h._loadAssetByUuid(e,f,r)})}(_,d.uuidObjList[y],d.uuidPropList[y])}i&&0===l&&(i(null,u,!!c),i=null),d.reset()},getAssetByUuid:function(e){return h._uuidToAsset[e]||null},unloadAsset:function(e,t){var i;i="string"==typeof e?h._uuidToAsset[e]:e,i&&(t&&i.isValid&&i.destroy(),delete h._uuidToAsset[i._uuid])},init:function(e,t,i){u=Fire.Path.setEndWithSep(e,!0,"/"),l=Fire.Path.setEndWithSep(t||"",!0,"/"),c=i||{}}};h._uuidToAsset={},Fire.AssetLibrary=h},{"./js":27,"./load-manager":28,"./loaders":29,"./utils":40}],13:[function(e,t,i){var r=e("./raw-asset");Fire.Asset=Fire.Class({name:"Fire.Asset","extends":r,constructor:function(){Object.defineProperty(this,"_uuid",{value:"",writable:!0,enumerable:!1})},properties:{url:{get:function(){if(this._rawFiles){if(Fire.AssetLibrary){var e=Fire.AssetLibrary.getImportedDir(this._uuid),t=this._rawFiles[0];return e+Fire.Path.sep+t}Fire.error("asset.url is not usable in core process")}return""},visible:!1},urls:{get:function(){if(this._rawFiles){if(Fire.AssetLibrary){var e=Fire.AssetLibrary.getImportedDir(this._uuid);return this._rawFiles.map(function(t){return e+Fire.Path.sep+t})}Fire.error("asset.urls is not usable in core process")}return[]},visible:!1},_rawFiles:null},statics:{deserialize:function(e){return Fire.deserialize(e)}},serialize:function(){return Editor.serialize(this)},createNode:null,_setRawFiles:function(e){e=e.map(function(e){"."===e.charAt(0)&&(e=e.slice(1));var t=e.charAt(0);return("/"===t||"\\"===t)&&(e=e.slice(1)),e}),this._rawFiles=e.length>0?e:null}}),t.exports=Fire.Asset},{"./raw-asset":36}],14:[function(e,t,i){function r(e,t,i){}{var n=e("./js");e("./utils").isPlainEmptyObj_DEV}Fire.attr=function(e,t,i){var r,s,o,a="_attr$"+t;if("function"==typeof e){if(r=e.prototype,s=r[a],"undefined"!=typeof i){if("object"!=typeof i)return r[a]=i,i;s||(r[a]=s={});for(o in i)"_"!==o[0]&&(s[o]=i[o])}return s}if(r=e,"undefined"!=typeof i){if("object"==typeof i){r.hasOwnProperty(a)&&(s=r[a]),s||(r[a]=s={});for(o in i)"_"!==o[0]&&(s[o]=i[o]);return n.addon({},s,r.constructor.prototype[a])}return r[a]=i,i}return s=r[a],"object"==typeof s?n.addon({},s,r.constructor.prototype[a]):s},Fire.NonSerialized={serializable:!1,_canUsedInGetter:!1},Fire.EditorOnly={editorOnly:!0,_canUsedInGetter:!1},Fire.Integer="Integer",Fire.Float="Float",Fire.Boolean="Boolean",Fire.String="String",Fire._ScriptUuid={},Fire.ObjectType=function(e){return{type:"Object",ctor:e}},Fire.RawType=function(e){return{rawType:e,serializable:!1,_canUsedInGetter:!1,_onAfterProp:function(e,t){}}},Fire.Nullable=function(e,t){return{nullable:e,_onAfterProp:function(i,r){i.prop(e,t,{visible:!1});var n=Fire.attr(i,r)||{};n.serializable===!1?Fire.attr(i,e,Fire.NonSerialized):n.editorOnly&&Fire.attr(i,e,Fire.EditorOnly)}}},Fire.Watch=function(e,t){return{watch:[].concat(e),watchCallback:t}},Fire.Range=function(e,t){return{min:e,max:t}},t.exports={getTypeChecker:r}},{"./js":27,"./utils":40}],15:[function(e,t,i){var r=e("./js"),n=function(){this._callbackTable={}};n.prototype.add=function(e,t){var i=this._callbackTable[e];return"undefined"!=typeof i?(t&&(null!==i?i.push(t):(i=[t],this._callbackTable[e]=i)),!1):(i=t?[t]:null,this._callbackTable[e]=i,!0)},n.prototype.has=function(e,t){var i=this._callbackTable[e];return i&&i.length>0?t?-1!==i.indexOf(t):!0:!1},n.prototype.removeAll=function(e){delete this._callbackTable[e]},n.prototype.remove=function(e,t){var i=this._callbackTable[e];if(i){var r=i.indexOf(t);if(-1!==r)return i.splice(r,1),!0}return!1},Fire._CallbacksHandler=n;var s=function(){n.call(this)};r.extend(s,n),Fire.CallbacksInvoker=s,s.prototype.invoke=function(e,t,i,r,n,s){var o=this._callbackTable[e];if(o)for(var a=0;a<o.length;a++)o[a](t,i,r,n,s)},s.prototype.invokeAndRemove=function(e,t,i,r,n,s){var o=this._callbackTable[e];if(o)for(var a=0;a<o.length;a++)o[a](t,i,r,n,s);this.removeAll(e)},s.prototype.bindKey=function(e,t){var i=this;return function(r,n,s,o,a){var u=i._callbackTable[e];if(u)for(var l=0;l<u.length;l++)u[l](r,n,s,o,a);t&&i.removeAll(e)}},s.CallbacksHandler=n,t.exports=s},{"./js":27}],16:[function(e,t,i){function r(e,t,i){function r(t,i,r){var s=e[t];if(s&&typeof s===i)if("undefined"==typeof r){var o={};o[t]=s,n.push(o)}else n.push("function"==typeof r?r(s):r)}s.length=0;{var n=s;e.type}r("rawType","string",Fire.RawType),r("editorOnly","boolean",Fire.EditorOnly),e.url?n.push({saveUrlAsAsset:!0}):e.serializable===!1&&n.push(Fire.NonSerialized);var o=e.range;o&&Array.isArray(o)&&o.length>=2&&n.push(Fire.Range(o[0],o[1]));var a=e.nullable;if(a&&"object"==typeof a){var u=a.propName;if("string"==typeof u){var l=a["default"];"boolean"==typeof l&&n.push(Fire.Nullable(u,l))}}return n}e("./attribute"),e("./class");var n=(e("./attribute").getTypeChecker,e("./preprocess-attrs"));Fire.Class=function(e){if(0===arguments.length)return Fire.extend();if(!e)return Fire.error("[Fire.Class] Option must be non-nil"),Fire.extend();var t,i=e.name,s=e["extends"],o=e.hasOwnProperty("constructor")&&e.constructor||void 0;i?t=Fire.extend(i,s,o):(t=Fire.extend(s,o),i=Fire.JS.getClassName(t));var a=e.properties;if(a){n(a,i);for(var u in a){var l=a[u],c=l&&"object"==typeof l&&!Array.isArray(l),f=c&&l.constructor==={}.constructor;f||(l={"default":l});var d=r(l,i,u);if(l.hasOwnProperty("default"))t.prop.apply(t,[u,l["default"]].concat(d));else{var h=l.get,p=l.set;h&&t.get.apply(t,[u,h].concat(d)),p&&t.set(u,p)}}}var y=e.statics;if(y){var g;for(g in y)t[g]=y[g]}var _=["name","extends","constructor","properties","statics"];for(var v in e)if(-1===_.indexOf(v)){var m=e[v],F=typeof m;if("function"===F||null===m)t.prototype[v]=m;else;}return t};var s=[]},{"./attribute":14,"./class":17,"./preprocess-attrs":35}],17:[function(require,module,exports){function instantiateProps(e,t){var i=t.__props__;if(i)for(var r=0;r<i.length;r++){var n=i[r],s=Fire.attr(t,n);if(s&&s.hasOwnProperty("default")){var o=s["default"];"object"==typeof o&&o&&(o=o.clone?o.clone():Array.isArray(o)?[]:{}),e[n]=o}}}function _initClass(e,t){for(var i in _metaClass)Object.defineProperty(t,i,{value:_metaClass[i],writable:"__props__"===i,enumerable:"__props__"===i})}function _nicifyFireClass(e,t){}function doDefine(e,t,i){var r=!e.startsWith("Fire."),n=_createCtor(i,t,r);return _initClass(e,n),t&&(JS.extend(n,t),n.$super=t,t.__props__&&(n.__props__=t.__props__.slice())),JS.setClassName(e,n),n}function define(e,t,i){if(Fire.isChildClassOf(t,Fire.Behavior)){var r=Fire._RFpeek();if(r){if(r.beh)return void Fire.error("Each script can have at most one Behavior.");var n=r.uuid;n&&e&&Fire.warn("Should not specify class name for Behavior which defines in project."),e=e||r.script;var s=doDefine(e,t,i);return r.uuid&&JS._setClassId(r.uuid,s),r.beh=s,s}}return doDefine(e,t,i)}function _checkCtor(e){}function _createCtor(constructor,baseClass,useTryCatch){var ctors;Fire._isFireClass(baseClass)?(ctors=baseClass.__ctors__,ctors&&(ctors=ctors.slice())):baseClass&&(ctors=[baseClass]),ctors?constructor&&ctors.push(constructor):constructor&&(ctors=[constructor]);var fireClass,body="(function(){\n";if(body+="instantiateProps(this,fireClass);\n",ctors){if(body+="var cs=fireClass.__ctors__;\n",useTryCatch&&(body+="try{\n"),ctors.length<=5)for(var i=0;i<ctors.length;i++)body+="(cs["+i+"]).apply(this,arguments);\n";else body+="for(var i=0,l=cs.length;i<l;++i){\n",body+="(cs[i]).apply(this,arguments);\n}\n";useTryCatch&&(body+="}catch(e){\nFire._throw(e);\n}\n")}return body+="})",fireClass=eval(body),Object.defineProperty(fireClass,"__ctors__",{value:ctors||null,writable:!1,enumerable:!1}),fireClass}var JS=require("./js"),Utils=require("./utils"),_isPlainEmptyObj_DEV=Utils.isPlainEmptyObj_DEV,_cloneable_DEV=Utils.cloneable_DEV;require("./attribute");var _appendProp=function(e){if(this.__props__){var t=this.__props__.indexOf(e);0>t&&this.__props__.push(e)}else this.__props__=[e]},_metaClass={__props__:null,prop:function(e,t,i){"use strict";if(Fire.attr(this,e,{"default":t}),_appendProp.call(this,e),i){for(var r=null,n=2,s=n;s<arguments.length;s++){var o=arguments[s];Fire.attr(this,e,o),o._onAfterProp&&(r=r||[],r.push(o._onAfterProp))}if(r)for(var a=0;a<r.length;a++)r[a](this,e)}return this},get:function(e,t,i){"use strict";if(i)for(var r=2,n=r;n<arguments.length;n++){var s=arguments[n];Fire.attr(this,e,s)}Fire.attr(this,e,Fire.NonSerialized);var o=!0;return o&&_appendProp.call(this,e),Object.getOwnPropertyDescriptor(this.prototype,e)?Object.defineProperty(this.prototype,e,{get:t}):Object.defineProperty(this.prototype,e,{get:t,configurable:!0,enumerable:!0}),this},set:function(e,t){return Object.getOwnPropertyDescriptor(this.prototype,e)?Object.defineProperty(this.prototype,e,{set:t}):Object.defineProperty(this.prototype,e,{set:t,configurable:!0,enumerable:!0}),this},getset:function(e,t,i,r){"use strict";if(r){var n=[].slice.call(arguments);n.splice(2,1),this.get.apply(this,n)}else this.get(e,t);return this.set(e,i),this}};Fire._isFireClass=function(e){return!!e&&e.prop===_metaClass.prop},Fire._convertToFireClass=function(e){e.prop=_metaClass.prop},Fire.isChildClassOf=function(e,t){if(e&&t){if("function"!=typeof e)return!1;if("function"!=typeof t)return!1;for(;e&&e.$super;e=e.$super)if(e===t)return!0;if(e===t)return!0;for(var i=Object.getPrototypeOf(e.prototype);i;){if(e=i.constructor,e===t)return!0;i=Object.getPrototypeOf(e.prototype)}}return!1},Fire.extend=function(e,t,i){return"function"==typeof e&&(i=t,t=e,e=""),"string"==typeof e?define(e,t,i):"undefined"==typeof e?define("",t,i):null},Fire._fastDefine=function(e,t,i){JS.setClassName(e,t),t.__props__=i;for(var r=0;r<i.length;r++)Fire.attr(t,i[r],{visible:!1})},module.exports={instantiateProps:instantiateProps}},{"./attribute":14,"./js":27,"./utils":40}],18:[function(e,t,i){if(Fire.isNode=!("undefined"==typeof process||!process.versions||!process.versions.node),Fire.isNodeWebkit=!!(Fire.isNode&&"node-webkit"in process.versions),Fire.isAtomShell=!!(Fire.isNode&&"atom-shell"in process.versions),Fire.isApp=Fire.isNodeWebkit||Fire.isAtomShell,Fire.isPureWeb=!Fire.isNode&&!Fire.isApp,Fire.isEditor=Fire.isApp,Fire.isWeb=Fire.isAtomShell?"undefined"!=typeof process&&"renderer"===process.type:"undefined"==typeof __dirname||null===__dirname,Fire.isCoreLevel=Fire.isApp&&!Fire.isWeb,Fire.isNode)Fire.isDarwin="darwin"===process.platform,Fire.isWin32="win32"===process.platform;else{var r=window.navigator.platform;Fire.isDarwin="Mac"===r.substring(0,3),Fire.isWin32="Win"===r.substring(0,3)}if(Fire.isPureWeb){var n=window,s=n.navigator,o=document,a=o.documentElement,u=s.userAgent.toLowerCase();Fire.isMobile=-1!==u.indexOf("mobile")||-1!==u.indexOf("android"),Fire.isIOS=!!u.match(/(iPad|iPhone|iPod)/i),Fire.isAndroid=!(!u.match(/android/i)&&!s.platform.match(/android/i))}else Fire.isAndroid=Fire.isIOS=Fire.isMobile=!1;Object.defineProperty(Fire,"isRetina",{get:function(){return Fire.isWeb&&window.devicePixelRatio&&window.devicePixelRatio>1}}),Fire.isRetinaEnabled=(Fire.isIOS||Fire.isDarwin)&&!0&&Fire.isRetina;var l=1,c=2,f=4,d=8,h=16,p=32,y={DontSave:f,EditorOnly:d,Dirty:h,DontDestroy:p,Destroying:512,HideInGame:1024,HideInEditor:2048,IsOnEnableCalled:4096,IsOnLoadCalled:8192,IsOnStartCalled:16384,IsEditorOnEnabledCalled:32768};y.Hide=y.HideInGame|y.HideInEditor,Fire._ObjectFlags=y;var g=~(c|h|y.Destroying|p|y.IsOnEnableCalled|y.IsEditorOnEnabledCalled|y.IsOnLoadCalled|y.IsOnStartCalled);t.exports={Destroyed:l,ToDestroy:c,DontSave:f,EditorOnly:d,PersistentMask:g}},{}],19:[function(e,t,i){var r=e("./js"),n=!1,s=function(){function e(e,t,i,r,s){if(this._editor=r,this._classFinder=s,n&&(this._target=i),this._idList=[],this._idObjList=[],this._idPropList=[],this.result=t||new Fire._DeserializeInfo,Array.isArray(e)){var u=e,l=u.length;this.deserializedList=new Array(l);for(var c=0;l>c;c++)if(u[c]){var f;n&&(f=0===c&&i),this.deserializedList[c]=a(this,u[c],f)}this.deserializedData=l>0?this.deserializedList[0]:[]}else this.deserializedList=[null],this.deserializedData=e?a(this,e,i):null,this.deserializedList[0]=this.deserializedData;o(this)}function t(e,t,i){for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];"object"!=typeof s?"__type__"!==r&&(t[r]=s):s?s.__uuid__||"undefined"!=typeof s.__id__?n?e._deserializeObjField(t,s,r,e._target&&t):e._deserializeObjField(t,s,r):t[r]=n?a(e,s,e._target&&t[r]):a(e,s):t[r]=null}}function i(e,t,i){for(var r in t){var s=i[r];"undefined"!=typeof s&&i.hasOwnProperty(r)&&("object"!=typeof s?t[r]=s:s?s.__uuid__||"undefined"!=typeof s.__id__?n?e._deserializeObjField(t,s,r,e._target&&t):e._deserializeObjField(t,s,r):t[r]=n?a(e,s,e._target&&t[r]):a(e,s):t[r]=null)}}function s(e,i,r,s,o){var u=s.__props__;if(u){for(var l=0;l<u.length;l++){var c=u[l],f=Fire.attr(s,c),d=f.rawType;if(d)e.result.rawProp&&Fire.error("not support multi raw object in a file"),e.result.rawProp=c;else{if(!e._editor&&f.editorOnly)continue;var h=f.saveUrlAsAsset;if(f.serializable===!1&&!h)continue;var p=r[c];if("undefined"==typeof p)continue;"object"!=typeof p?i[c]=p:p?p.__uuid__||"undefined"!=typeof p.__id__?n?e._deserializeObjField(i,p,c,o&&i):e._deserializeObjField(i,p,c):i[c]=n?a(e,p,o&&o[c]):a(e,p):i[c]=null}}"_$erialized"===u[u.length-1]&&(i._$erialized=r,t(e,i._$erialized,r))}}var o=function(e){for(var t=e.deserializedList,i=0,r=e._idList.length;r>i;i++){var n=e._idPropList[i],s=e._idList[i];e._idObjList[i][n]=t[s]}};e.prototype._deserializeObjField=function(e,t,i,r){var s=t.__id__;if("undefined"==typeof s){var o=t.__uuid__;o?(this.result.uuidList.push(o),this.result.uuidObjList.push(e),this.result.uuidPropList.push(i)):e[i]=n?a(this,t,r&&r[i]):a(this,t)}else{var u=this.deserializedList[s];u?e[i]=u:(this._idList.push(s),this._idObjList.push(e),this._idPropList.push(i))}};var a=function(e,o,u){var l,c=null,f=null;if(o.__type__){if(f=e._classFinder(o.__type__),!f)return Fire.error("[Fire.deserialize] unknown type: "+o.__type__),null;if(n&&u?(u instanceof f||Fire.warn("Type of target to deserialize not matched with data: target is %s, data is %s",r.getClassName(u),f),c=u):c=new f,c instanceof FObject&&c._deserialize)return c._deserialize(o.content,e),c;Fire._isFireClass(f)?s(e,c,o,f,u):i(e,c,o)}else if(Array.isArray(o)){n&&u?(u.length=o.length,c=u):c=new Array(o.length);for(var d=0;d<o.length;d++)l=o[d],"object"==typeof l&&l?l.__uuid__||"undefined"!=typeof l.__id__?n?e._deserializeObjField(c,l,""+d,u&&u[d]):e._deserializeObjField(c,l,""+d):c[d]=n?a(e,l,u&&u[d]):a(e,l):c[d]=l}else c=n&&u||{},t(e,c,o);return c};return e}();Fire.deserialize=function(e,t,i){var o=i&&"isEditor"in i?i.isEditor:!1,a=i&&i.classFinder||r._getClassById,u=i&&i.createAssetRefs||Fire.isCoreLevel,l=n&&i&&i.target;"string"==typeof e&&(e=JSON.parse(e)),u&&!t&&(t=new Fire._DeserializeInfo),Fire._isCloning=!0;var c=new s(e,t,l,o,a);return Fire._isCloning=!1,u&&t.assignAssetsBy(Editor.serialize.asAsset),c.deserializedData},Fire._DeserializeInfo=function(){this.uuidList=[],this.uuidObjList=[],this.uuidPropList=[],this.rawProp=""},Fire._DeserializeInfo.prototype.reset=function(){this.uuidList.length=0,this.uuidObjList.length=0,this.uuidPropList.length=0,this.rawProp=""},Fire._DeserializeInfo.prototype.getUuidOf=function(e,t){for(var i=0;i<this.uuidObjList.length;i++)if(this.uuidObjList[i]===e&&this.uuidPropList[i]===t)return this.uuidList[i];return""},Fire._DeserializeInfo.prototype.assignAssetsBy=function(e){for(var t=!0,i=0,r=this.uuidList.length;r>i;i++){var n=this.uuidList[i],s=e(n);if(s){var o=this.uuidObjList[i],a=this.uuidPropList[i];o[a]=s}else Fire.error("Failed to assign asset: "+n),t=!1}return t},Fire.deserialize.applyMixinProps=function(e,t,i){var r=t.__props__;if(r)for(var n=0;n<r.length;n++){var s=r[n],o=Fire.attr(t,s),a=o.saveUrlAsAsset;if((o.serializable!==!1||a)&&!o.editorOnly){var u=e[s];"undefined"!=typeof u&&(i[s]=u)}}}},{"./js":27}],20:[function(e,t,i){Fire.defineEnum=function(e){var t={};Object.defineProperty(t,"__enums__",{value:void 0,writable:!0});var i=-1;for(var r in e){var n=e[r];-1===n?n=++i:i=n,t[r]=n;var s=""+n;r!==s&&Object.defineProperty(t,s,{value:r,enumerable:!1})}return t},Fire.isEnumType=function(e){return e&&e.hasOwnProperty("__enums__")}},{}],21:[function(e,t,i){function r(){s.call(this)}var n=e("../js"),s=e("../callbacks-invoker").CallbacksHandler;n.extend(r,s),r.prototype.invoke=function(e){var t=this._callbackTable[e.type];if(t&&t.length>0){if(1===t.length)return void t[0].call(e.currentTarget,e);for(var i=t.length-1,r=t[i],n=0;i>=n;++n){var s=t[n];if(s.call(e.currentTarget,e),e._propagationImmediateStopped||n===i)break;if(t[i]!==r){if(t[i-1]!==r)return void Fire.error("Call event.stop(true) when you remove more than one callbacks in a event callback.");t[n]!==s&&--n,--i}}}},t.exports=r},{"../callbacks-invoker":15,"../js":27}],22:[function(e,t,i){function r(){a.call(this),this._capturingListeners=null,this._bubblingListeners=null}var n=e("./event-listeners"),s=e("./event"),o=s.CustomEvent,a=e("../fobject"),u=e("../js");u.extend(r,a),r.prototype.on=function(e,t,i){if(i="undefined"!=typeof i?i:!1,!t)return void Fire.error("Callback of event must be non-nil");var r=null;r=i?this._capturingListeners=this._capturingListeners||new n:this._bubblingListeners=this._bubblingListeners||new n,r.has(e,t)||r.add(e,t)},r.prototype.off=function(e,t,i){if(i="undefined"!=typeof i?i:!1,t){var r=i?this._capturingListeners:this._bubblingListeners;r&&r.remove(e,t)}},r.prototype.once=function(e,t,i){var r=this,n=function(s){r.off(e,n,i),t(s)};this.on(e,n,i)};var l=new Array(16);l.length=0,r.prototype._doDispatchEvent=function(e){e.target=this,this._getCapturingTargets(e.type,l),e.eventPhase=1;var t,i;for(i=l.length-1;i>=0;--i)if(t=l[i],t.isValid&&t._capturingListeners&&(e.currentTarget=t,t._capturingListeners.invoke(e),e._propagationStopped))return;if(l.length=0,(!this.isValid||(this._doSendEvent(e),!e._propagationStopped))&&e.bubbles)for(this._getBubblingTargets(e.type,l),e.eventPhase=3,i=0;i<l.length;++i)if(t=l[i],t.isValid&&t._bubblingListeners&&(e.currentTarget=t,t._bubblingListeners.invoke(e),e._propagationStopped))return},r.prototype.dispatchEvent=function(e){this._doDispatchEvent(e),l.length=0;var t=!e._defaultPrevented;return e._reset(),t},r.prototype._doSendEvent=function(e){e.eventPhase=2,e.currentTarget=this,this._capturingListeners&&(this._capturingListeners.invoke(e),e._propagationStopped)||this._bubblingListeners&&this._bubblingListeners.invoke(e)},r.prototype.emit=function(e,t){if("string"==typeof e){var i=new o(e);i.detail=t,this._doSendEvent(i)}else Fire.error("The message must be provided")},r.prototype._getCapturingTargets=function(e,t){},r.prototype._getBubblingTargets=function(e,t){},Fire.EventTarget=r,t.exports=r},{"../fobject":24,"../js":27,"./event":23,"./event-listeners":21}],23:[function(e,t,i){function r(e,t){"undefined"==typeof t&&(t=!1),this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=t,this._defaultPrevented=!1,this._propagationStopped=!1,this._propagationImmediateStopped=!1}function n(e,t){r.call(this,e,t),this.detail=null}r.NONE=0,r.CAPTURING_PHASE=1,r.AT_TARGET=2,r.BUBBLING_PHASE=3,r.prototype.stop=function(e){this._propagationStopped=!0,e&&(this._propagationImmediateStopped=!0)},r.prototype.preventDefault=function(){this._defaultPrevented=!0},r.prototype._reset=function(){this.target=null,this.currentTarget=null,this.eventPhase=0,this._defaultPrevented=!1,this._propagationStopped=!1,this._propagationImmediateStopped=!1},r.CustomEvent=n,Fire.Event=r,Fire.CustomEvent=n,t.exports=r},{}],24:[function(e,t,i){var r=e("./js");e("./class");var n=e("./definition"),s=n.Destroyed,o=n.ToDestroy;FObject=function(){function e(){this._name="",this._objFlags=0}Fire._fastDefine("Fire.FObject",e,["_name","_objFlags"]);var t=[];Object.defineProperty(e,"_deferredDestroy",{value:function(){for(var e=t.length,i=0;e>i;++i){var r=t[i];r._objFlags&s||r._destroyImmediate()}e===t.length?t.length=0:t.splice(0,e),n=-1},enumerable:!1}),Object.defineProperty(e,"_clearDeferredDestroyTimer",{value:function(){-1!==n&&(clearTimeout(n),n=-1)},enumerable:!1});var i=e.prototype;r.getset(i,"name",function(){return this._name},function(e){this._name=e}),r.get(i,"isValid",function(){return!(this._objFlags&s)});var n=-1;return i.destroy=function(){return this._objFlags&s?(Fire.warn("object already destroyed"),!1):this._objFlags&o?!1:(this._objFlags|=o,t.push(this),-1===n&&Fire.engine&&!Fire.engine._isUpdating&&(n=setTimeout(e._deferredDestroy,1)),!0)},i._destruct=function(){for(var e in this)if(this.hasOwnProperty(e)){var t=typeof this[e];switch(t){case"string":this[e]="";break;case"object":this[e]=null;break;case"function":this[e]=null}}},i._onPreDestroy=null,i._destroyImmediate=function(){return this._objFlags&s?void Fire.error("object already destroyed"):(this._onPreDestroy&&this._onPreDestroy(),this._destruct(),void(this._objFlags|=s))},i._serialize=null,i._deserialize=null,e}(),Fire.isValid=function(e){return"object"==typeof e?!(!e||e._objFlags&s):"undefined"!=typeof e},Fire.FObject=FObject,t.exports=FObject},{"./class":17,"./definition":18,"./js":27}],25:[function(e,t,i){var r="undefined"!=typeof global?global:window,n;r.Fire||(r.Fire=function(e){return n(e)}),Fire._setWrapperGetter=function(e){n=e},e("./definition"),e("./js"),Fire.log||e("./log"),e("./math"),e("./utils"),e("./enum"),e("./fobject"),e("./class-new"),e("./value-types"),e("./callbacks-invoker"),e("./path"),e("./intersection"),e("./polygon"),e("./raw-asset"),e("./asset"),e("./deserialize"),e("./event/event-target"),e("./playable"),e("./../runtime/behavior"),e("./requiring-frame"),Fire.isWeb&&(e("./ticker"),e("./time"),e("./loaders"),e("./load-manager"),e("./asset-library")),t.exports=Fire},{"./../runtime/behavior":59,"./asset":13,"./asset-library":12,"./callbacks-invoker":15,"./class-new":16,"./definition":18,"./deserialize":19,"./enum":20,"./event/event-target":22,"./fobject":24,"./intersection":26,"./js":27,"./load-manager":28,"./loaders":29,"./log":30,"./math":31,"./path":32,"./playable":33,"./polygon":34,"./raw-asset":36,"./requiring-frame":37,"./ticker":38,"./time":39,"./utils":40,"./value-types":42}],26:[function(e,t,i){Fire.Intersection=function(){function e(e,t,i,r){var n=(r.x-i.x)*(e.y-i.y)-(r.y-i.y)*(e.x-i.x),s=(t.x-e.x)*(e.y-i.y)-(t.y-e.y)*(e.x-i.x),o=(r.y-i.y)*(t.x-e.x)-(r.x-i.x)*(t.y-e.y);if(0!==o){var a=n/o,u=s/o;if(a>=0&&1>=a&&u>=0&&1>=u)return!0}return!1}function t(t,i,r){var n=new Fire.Vec2(r.x,r.y),s=new Fire.Vec2(r.x,r.yMax),o=new Fire.Vec2(r.xMax,r.yMax),a=new Fire.Vec2(r.xMax,r.y);return e(t,i,n,s)?!0:e(t,i,s,o)?!0:e(t,i,o,a)?!0:e(t,i,a,n)?!0:!1}function i(t,i,r){for(var n=r.points.length,s=0;n>s;++s){var o=r.points[s],a=r.points[(s+1)%n];if(e(t,i,o,a))return!0}return!1}function r(e,t){var i=e.x,r=e.y,n=e.x+e.width,s=e.y+e.height,o=t.x,a=t.y,u=t.x+t.width,l=t.y+t.height;return u>=i&&n>=o&&l>=r&&s>=a}function n(e,t){var r,n=new Fire.Vec2(e.x,e.y),s=new Fire.Vec2(e.x,e.yMax),o=new Fire.Vec2(e.xMax,e.yMax),a=new Fire.Vec2(e.xMax,e.y);if(i(n,s,t))return!0;if(i(s,o,t))return!0;if(i(o,a,t))return!0;if(i(a,n,t))return!0;for(r=0;r<t.points.length;++r)if(e.contains(t.points[r]))return!0;return t.contains(n)?!0:t.contains(s)?!0:t.contains(o)?!0:t.contains(a)?!0:!1}function s(e,t){var r;for(r=0;r<length;++r){var n=e.points[r],s=e.points[(r+1)%length];if(i(n,s,t))return!0}for(r=0;r<t.points.length;++r)if(e.contains(t.points[r]))return!0;for(r=0;r<e.points.length;++r)if(t.contains(e.points[r]))return!0;return!1}var o={};return o.lineLine=e,o.lineRect=t,o.linePolygon=i,o.rectRect=r,o.rectPolygon=n,o.polygonPolygon=s,o}()},{}],27:[function(e,t,i){function r(e,t){var i=Object.getOwnPropertyDescriptor(e,t);if(i)return i;var n=Object.getPrototypeOf(e);return n?r(n,t):null}function n(e,t,i){var n=r(t,e);Object.defineProperty(i,e,n)}var s={addon:function(e){"use strict";e=e||{};for(var t=1,i=arguments.length;i>t;t++){var r=arguments[t];if(r){if("object"!=typeof r){Fire.error("Fire.JS.addon called on non-object:",r);continue}for(var s in r)s in e||n(s,r,e)}}return e},mixin:function(e){"use strict";e=e||{};for(var t=1,i=arguments.length;i>t;t++){var r=arguments[t];if(r){if("object"!=typeof r){Fire.error("Fire.JS.mixin: arguments must be type object:",r);continue}for(var s in r)n(s,r,e)}}return e},extend:function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e},clear:function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)delete e[t[i]]},getPropertyDescriptor:r};s.getClassName=function(e){if("function"==typeof e){if(e.prototype.__classname__)return e.prototype.__classname__}else if(e&&e.constructor){if(e.constructor.prototype&&e.constructor.prototype.hasOwnProperty("__classname__"))return e.__classname__;var t;if(e.constructor.name&&(t=e.constructor.name),e.constructor.toString){var i,r=e.constructor.toString();

i=r.match("["===r.charAt(0)?/\[\w+\s*(\w+)\]/:/function\s*(\w+)/),i&&2===i.length&&(t=i[1])}return"Object"!==t?t:null}return null},function(){function e(e,t){return function(i,r){if(r.prototype.hasOwnProperty(e)&&delete t[r.prototype[e]],r.prototype[e]=i,i){var n=t[i];if(n&&n!==r){var s="A Class already exists with the same "+e+' : "'+i+'".';Fire.error(s)}else t[i]=r}}}var t={},i={};s._setClassId=e("__cid__",t);var r=e("__classname__",i);s.setClassName=function(e,t){r(e,t),e&&!t.prototype.hasOwnProperty("__cid__")&&s._setClassId(e,t)},s.unregisterClass=function(e){"use strict";for(var r=0;r<arguments.length;r++){var n=arguments[r].prototype,s=n.__cid__;s&&delete t[s];var o=n.__classname__;o&&delete i[o]}},s._getClassById=function(e){var i=t[e];return i},s.getClassByName=function(e){return i[e]},s._getClassId=function(e){if("function"==typeof e&&e.prototype.hasOwnProperty("__cid__"))return e.prototype.__cid__;if(e&&e.constructor){var t=e.constructor.prototype;if(t&&t.hasOwnProperty("__cid__"))return e.__cid__}return""}}(),s.getset=function(e,t,i,r,n){Object.defineProperty(e,t,{get:i,set:r,enumerable:!!n})},s.get=function(e,t,i,r){Object.defineProperty(e,t,{get:i,enumerable:!!r})},s.set=function(e,t,i,r){Object.defineProperty(e,t,{set:i,enumerable:!!r})},s.obsolete=function(e,t,i,r){var n=t.split(".").slice(-1);s.get(e,n,function(){return e[i]}),r&&s.set(e,n,function(t){e[i]=t})},s.obsoletes=function(e,t,i,r){for(var n in i){var o=i[n];s.obsolete(e,t+"."+n,o,r)}},s.Array={remove:function(e,t){var i=e.indexOf(t);return-1!==i?(e.splice(i,1),!0):!1},removeAt:function(e,t){e.splice(t,1)},contains:function(e,t){return-1!==e.indexOf(t)}},s.String={startsWith:function(e,t,i){return e.startsWith(t,i)},endsWith:function(e,t,i){return e.endsWith(t,i)}},Fire.JS=s,t.exports=s},{}],28:[function(e,t,i){function r(){return{image:{loader:s.ImageLoader,defaultExtname:".host"},json:{loader:s.JsonLoader,defaultExtname:".json"},text:{loader:s.TextLoader,defaultExtname:".txt"}}}function n(e,t,i){l._curConcurrent+=1,e(t,function(e,t){i(e,t),l._curConcurrent=Math.max(0,l._curConcurrent-1),u()})}var s=e("./loaders"),o=(e("./callbacks-invoker"),new Fire.CallbacksInvoker),a=[],u=function(){if(l._curConcurrent>=l.maxConcurrent)return void Fire.error("too many concurrent requests");var e=a.pop();e&&n(e.loader,e.url,e.callback)},l={maxConcurrent:2,_curConcurrent:0,loadByLoader:function(e,t,i){if(o.add(t,i)){var r=o.bindKey(t,!0);this._curConcurrent<this.maxConcurrent?n(e,t,r):a.push({url:t,loader:e,callback:r})}},load:function(e,t,i,r){"function"==typeof i&&(r=i);var n=this._rawTypes[t];if(n){var s=i?"."+i:n.defaultExtname;if(s){var o=e+s;this.loadByLoader(n.loader,o,r)}else r(new Error("Undefined extname for the raw "+t+" file of "+e),null)}else r(new Error('Unknown raw type "'+t+'" of '+e),null)},_rawTypes:r(),registerRawTypes:function(e,t,i){return this._rawTypes[e]?void Fire.error('rawType "%s" has already defined',e):(i&&"."!==i[0]&&(i="."+i),void(this._rawTypes[e]={loader:t,defaultExtname:i}))},reset:function(){},isLoading:function(e,t){}};Fire.LoadManager=l,t.exports=l},{"./callbacks-invoker":15,"./loaders":29}],29:[function(e,t,i){function r(e,t,i){var r=document.createElement("img");r.crossOrigin="Anonymous";var n=function(){t&&t(null,this),r.removeEventListener("load",n),r.removeEventListener("error",s),r.removeEventListener("progress",i)},s=function(e,o,a){if(t){var u=new Error("Failed to load image: "+e+" Url: "+a);t(u,null)}r.removeEventListener("load",n),r.removeEventListener("error",s),r.removeEventListener("progress",i)};return r.addEventListener("load",n),r.addEventListener("error",s),i&&r.addEventListener("progress",i),r.src=e,r}function n(e,t,i,r){var n=new XMLHttpRequest,s=-1;n.onreadystatechange=function(){n.readyState===n.DONE?(t&&(200===n.status||0===n.status?t(null,n):t(new Error('LoadFromXHR: Could not load "'+e+'", status: '+n.status),null)),n.onreadystatechange=null,o&&n.removeEventListener("progress",o)):(!i||n.readyState!==n.LOADING||"onprogress"in n||(-1===s&&(s=n.getResponseHeader("Content-Length")),i(n.responseText.length,s)),i&&n.readyState===n.HEADERS_RECEIVED&&(s=n.getResponseHeader("Content-Length")))},n.open("GET",e,!0),r&&(n.responseType=r);var o;i&&"onprogress"in n&&(o=function(e){e.lengthComputable&&i(e.loaded,e.total)},n.addEventListener("progress",onprogress)),n.send()}function s(e,t,i){var r=t&&function(i,r){r&&r.responseText?t(null,r.responseText):t(new Error('TextLoader: "'+e+'" seems to be unreachable or the file is empty. InnerMessage: '+i),null)};n(e,r,i)}function o(e,t,i){var r=t&&function(i,r){if(r&&r.responseText){var n;try{n=JSON.parse(r.responseText)}catch(s){return void t(s,null)}t(null,n)}else t(new Error('JsonLoader: "'+e+'" seems to be unreachable or the file is empty. InnerMessage: '+i),null)};n(e,r,i)}Fire._ImageLoader=r,Fire._JsonLoader=o,t.exports={LoadFromXHR:n,ImageLoader:r,TextLoader:s,JsonLoader:o}},{"fire-url":void 0}],30:[function(e,t,i){Fire.log=function(){console.log.apply(console,arguments)},Fire.info=function(){(console.info||console.log).apply(console,arguments)},Fire.warn=function(){console.warn.apply(console,arguments)},Fire.error=console.error.bind(console),Fire._throw=function(e){Fire.error(e.stack||e)}},{}],31:[function(e,t,i){var r=e("./js"),n=Math.PI/180,s=180/Math.PI;r.mixin(Math,{TWO_PI:2*Math.PI,HALF_PI:.5*Math.PI,D2R:n,R2D:s,deg2rad:function(e){return e*n},rad2deg:function(e){return e*s},rad180:function(e){return(e>Math.PI||e<-Math.PI)&&(e=(e+Math.TOW_PI)%Math.TOW_PI),e},rad360:function(e){return e>Math.TWO_PI?e%Math.TOW_PI:0>e?Math.TOW_PI+e%Math.TOW_PI:e},deg180:function(e){return(e>180||-180>e)&&(e=(e+360)%360),e},deg360:function(e){return e>360?e%360:0>e?360+e%360:e},randomRange:function(e,t){return Math.random()*(t-e)+e},randomRangeInt:function(e,t){return Math.floor(this.randomRange(e,t))},clamp:function(e,t,i){return"number"!=typeof t?void Fire.error("[clamp] min value must be type number"):"number"!=typeof i?void Fire.error("[clamp] max value must be type number"):t>i?void Fire.error("[clamp] max value must not less than min value"):Math.min(Math.max(e,t),i)},clamp01:function(e){return Math.min(Math.max(e,0),1)},calculateMaxRect:function(e,t,i,r,n){var s=Math.min(t.x,i.x,r.x,n.x),o=Math.max(t.x,i.x,r.x,n.x),a=Math.min(t.y,i.y,r.y,n.y),u=Math.max(t.y,i.y,r.y,n.y);return e.x=s,e.y=a,e.width=o-s,e.height=u-a,e},lerp:function(e,t,i){return e+(t-e)*i}}),t.exports=Math},{"./js":27}],32:[function(e,t,i){Fire.Path=Fire.isNode?e("path"):function(){var e;if(Fire.isWin32){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,i=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/;e=function(e){var r=t.exec(e),n=(r[1]||"")+(r[2]||""),s=r[3]||"",o=i.exec(s),a=o[1],u=o[2],l=o[3];return[n,a,u,l]}}else{var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;e=function(e){return r.exec(e).slice(1)}}var n={basename:function(e){return e.replace(/^.*(\\|\/|\:)/,"")},extname:function(e){return e=n.basename(e),e.substring((~-e.lastIndexOf(".")>>>0)+1)},dirname:function(t){var i=e(t),r=i[0],n=i[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},sep:Fire.isWin32?"\\":"/"};return n}(),Fire.Path.setExtname=function(e,t){var i=(~-e.lastIndexOf(".")>>>0)+1;return e.substring(0,i)+t},Fire.Path.setEndWithSep=function(e,t,i){t="undefined"!=typeof t?t:!0;var r=e[e.length-1],n="\\"===r||"/"===r;return!n&&t?e+=i||Fire.Path.sep:n&&!t&&(e=e.slice(0,-1)),e}},{path:void 0}],33:[function(e,t,i){var r=e("./js"),n=e("./event/event-target"),s=function(){function e(){this._isPlaying=!1,this._isPaused=!1,this._isUpdating=!1,this._stepOnce=!1}r.extend(e,n);var t=e.prototype;r.get(t,"isPlaying",function(){return this._isPlaying},!0),r.get(t,"isUpdating",function(){return this._isUpdating},!0),r.get(t,"isPaused",function(){return this._isPaused},!0);var i=function(){};return t.onPlay=i,t.onPause=i,t.onResume=i,t.onStop=i,t.onError=i,t.play=function(){this._isPlaying?this._isPaused?(this._isPaused=!1,this._isUpdating=!0,this.onResume(),this.emit("resume")):this.onError("already-playing"):(this._isPlaying=!0,this._isUpdating=!this._isPaused,this.onPlay(),this.emit("play"))},t.stop=function(){this._isPlaying&&(this._isPlaying=!1,this._isPaused=!1,this._isUpdating=!1,this.emit("stop"),this.onStop())},t.pause=function(){this._isPaused=!0,this._isUpdating=!1,this.emit("pause"),this.onPause()},t.step=function(){this.pause(),this._stepOnce=!0,this._isPlaying||this.play()},e}();Fire.Playable=s,t.exports=s},{"./event/event-target":22,"./js":27}],34:[function(e,t,i){var r=e("./js");Fire.Polygon=function(){function e(e){this.points=e,this.points.length<3&&console.warn("Invalid polygon, the data must contains 3 or more points.")}return r.setClassName("Fire.Polygon",e),e.prototype.intersects=function(e){return Intersection.polygonPolygon(this,e)},e.prototype.contains=function(e){for(var t=!1,i=e.x,r=e.y,n=this.points.length,s=0,o=n-1;n>s;o=s++){var a=this.points[s].x,u=this.points[s].y,l=this.points[o].x,c=this.points[o].y,f=u>r!=c>r&&(l-a)*(r-u)/(c-u)+a>i;f&&(t=!t)}return t},Object.defineProperty(e.prototype,"center",{get:function(){if(this.points.length<3)return null;for(var e=this.points[0].x,t=this.points[0].y,i=this.points[0].x,r=this.points[0].y,n=1;n<this.points.length;++n){var s=this.points[n].x,o=this.points[n].y;e>s?e=s:s>i&&(i=s),t>o?t=o:o>r&&(r=o)}return new Fire.Vec2(.5*(i+e),.5*(r+t))}}),e}()},{"./js":27}],35:[function(e,t,i){function r(e,t,i,r){if(!e.get&&!e.set&&e.hasOwnProperty("default")){var n="_valOf$"+t;e.get=function(){return this[n]},e.set=function(e){var t=this[n];this[n]=e,i.call(this,t)};var o={};r[n]=o;for(var a=0;a<s.length;a++){var u=s[a];e.hasOwnProperty(u)&&(o[u]=e[u],delete e[u])}}}function n(e,t,i,r,n){e.type=i}var s=["default","serializable","editorOnly","rawType"];t.exports=function(e,t){for(var i in e){var s=e[i];if(s){var o=s.notify;o&&r(s,i,o,e);var a=s.url;a&&n(s,i,a,e,t)}}}},{}],36:[function(e,t,i){var r=e("./fobject");Fire.RawAsset=Fire.Class({name:"Fire.RawAsset","extends":r,statics:{createNodeByUrl:null}}),t.exports=Fire.RawAsset},{"./fobject":24}],37:[function(e,t,i){var r=[];Fire._RFpush=function(e,t,i){2===arguments.length&&(i=t,t=""),r.push({uuid:t,script:i,module:e,exports:e.exports,beh:null})},Fire._RFpop=function(){var e=r.pop(),t=e.module,i=t.exports;if(i===e.exports){for(var n in i)return;t.exports=i=e.beh}},Fire._RFpeek=function(){return r[r.length-1]}},{}],38:[function(e,t,i){var r=function(){var e={},t=60;return window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame,e.requestAnimationFrame=60===t&&window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){return window.setTimeout(e,1e3/t)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame,e.cancelAnimationFrame=window.cancelAnimationFrame?function(e){window.cancelAnimationFrame(e)}:function(e){window.clearTimeout(e)},e.now=window.performance&&window.performance.now?function(){return window.performance.now()/1e3}:function(){return Date.now()/1e3},e}();Fire._Ticker=r,t.exports=r},{}],39:[function(e,t,i){var r=0,n=0,s={time:0,realTime:0,deltaTime:0,frameCount:0,maxDeltaTime:.3333333,_update:function(e,t,i){if(!t){i=i||s.maxDeltaTime;var o=e-r;o=Math.min(i,o),s.deltaTime=o,r=e,0===s.frameCount?n=e:(s.time+=o,s.realTime=e-n),++s.frameCount}},_restart:function(e){s.time=0,s.realTime=0,s.deltaTime=0,s.frameCount=0,r=e}};Fire.Time=s,t.exports=s},{}],40:[function(e,t,i){Fire.padLeft=function(e,t,i){return e=e.toString(),t-=e.length,t>0?new Array(t+1).join(i)+e:e},Fire.getEnumList=function(e){if(void 0!==e.__enums__)return e.__enums__;var t=[];for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],n="number"==typeof r&&(0|r)===r;n&&t.push({name:i,value:r})}return t.sort(function(e,t){return e.value-t.value}),e.__enums__=t,t},Fire.getVarFrom=function(e,t){for(var i=t.split("."),r=e,n=0;n<i.length;++n){var s=i[n];if(r=r[s],void 0===r||null===r)return null}return r},Fire.rgb2hsv=function(e,t,i){var r={h:0,s:0,v:0},n=Math.max(e,t,i),s=Math.min(e,t,i),o=0;return r.v=n,r.s=n?(n-s)/n:0,r.s?(o=n-s,r.h=e===n?(t-i)/o:t===n?2+(i-e)/o:4+(e-t)/o,r.h/=6,r.h<0&&(r.h+=1)):r.h=0,r},Fire.hsv2rgb=function(e,t,i){var r={r:0,g:0,b:0};if(0===t)r.r=r.g=r.b=i;else if(0===i)r.r=r.g=r.b=0;else{1===e&&(e=0),e*=6,t=t,i=i;var n=Math.floor(e),s=e-n,o=i*(1-t),a=i*(1-t*s),u=i*(1-t*(1-s));switch(n){case 0:r.r=i,r.g=u,r.b=o;break;case 1:r.r=a,r.g=i,r.b=o;break;case 2:r.r=o,r.g=i,r.b=u;break;case 3:r.r=o,r.g=a,r.b=i;break;case 4:r.r=u,r.g=o,r.b=i;break;case 5:r.r=i,r.g=o,r.b=a}}return r},Fire.binarySearch=function(e,t){for(var i=0,r=e.length-1;r>=i;){var n=i+r>>1;if(e[n]===t)return n;e[n]>t?r=n-1:i=n+1}return~i},Fire.nextTick=function(e,t,i){e&&setTimeout(function(){e(t,i)},1)},t.exports={isDomNode:Fire.isWeb&&function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},callInNextTick:function(e,t,i){e&&setTimeout(function(){e(t,i)},1)}}},{}],41:[function(e,t,i){var r=e("./value-type"),n=e("../js"),s=function(){function e(e,t,i,r){this.r="number"==typeof e?e:0,this.g="number"==typeof t?t:0,this.b="number"==typeof i?i:0,this.a="number"==typeof r?r:1}n.extend(e,r),Fire._fastDefine("Fire.Color",e,["r","g","b","a"]);var t={white:[1,1,1,1],black:[0,0,0,1],transparent:[0,0,0,0],gray:[.5,.5,.5],red:[1,0,0],green:[0,1,0],blue:[0,0,1],yellow:[1,235/255,4/255],cyan:[0,1,1],magenta:[1,0,1]};for(var i in t){var s=function(t,i,r,n){return function(){return new e(t,i,r,n)}}.apply(null,t[i]);Object.defineProperty(e,i,{get:s})}return e.prototype.clone=function(){return new e(this.r,this.g,this.b,this.a)},e.prototype.equals=function(e){return e&&this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a},e.prototype.lerp=function(t,i,r){r=r||new e;var n=this.r,s=this.g,o=this.b,a=this.a;return r.r=n+(t.r-n)*i,r.g=s+(t.g-s)*i,r.b=o+(t.b-o)*i,r.a=a+(t.a-a)*i,r},e.prototype.toString=function(){return"rgba("+this.r.toFixed(2)+", "+this.g.toFixed(2)+", "+this.b.toFixed(2)+", "+this.a.toFixed(2)+")"},e.prototype.setR=function(e){return this.r=e,this},e.prototype.setG=function(e){return this.g=e,this},e.prototype.setB=function(e){return this.b=e,this},e.prototype.setA=function(e){return this.a=e,this},e.prototype.toCSS=function(e){return"rgba"===e?"rgba("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+","+this.a.toFixed(2)+")":"rgb"===e?"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")":"#"+this.toHEX(e)},e.prototype.clamp=function(){this.r=Math.clamp01(this.r),this.g=Math.clamp01(this.g),this.b=Math.clamp01(this.b),this.a=Math.clamp01(this.a)},e.prototype.fromHEX=function(e){var t=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return this.r=(t>>16)/255,this.g=((65280&t)>>8)/255,this.b=(255&t)/255,this},e.prototype.toHEX=function(e){var t=[(255*this.r|0).toString(16),(255*this.g|0).toString(16),(255*this.b|0).toString(16)],i=-1;if("#rgb"===e)for(i=0;i<t.length;++i)t[i].length>1&&(t[i]=t[i][0]);else if("#rrggbb"===e)for(i=0;i<t.length;++i)1===t[i].length&&(t[i]="0"+t[i]);return t.join("")},e.prototype.toRGBValue=function(){return(255*Math.clamp01(this.r)<<16)+(255*Math.clamp01(this.g)<<8)+255*Math.clamp01(this.b)},e.prototype.fromHSV=function(e,t,i){var r=Fire.hsv2rgb(e,t,i);return this.r=r.r,this.g=r.g,this.b=r.b,this},e.prototype.toHSV=function(){return Fire.rgb2hsv(this.r,this.g,this.b)},e}();Fire.Color=s,Fire.color=function(e,t,i,r){return Array.isArray(e)?new s(e[0],e[1],e[2],e[3]):new s(e,t,i,r)}},{"../js":27,"./value-type":45}],42:[function(e,t,i){e("./vec2"),e("./rect"),e("./color"),e("./matrix23")},{"./color":41,"./matrix23":43,"./rect":44,"./vec2":46}],43:[function(e,t,i){var r=e("./value-type"),n=e("../js"),s=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0};n.extend(s,r),Fire._fastDefine("Fire.Matrix23",s,["a","b","c","d","tx","ty"]),Fire.Matrix23=s,s.identity=new s,s.prototype.clone=function(){var e=new s;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},s.prototype.set=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},s.prototype.equals=function(e){return e&&this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.tx===e.tx&&this.ty===e.ty},s.prototype.toString=function(){return"|"+this.a.toFixed(2)+" "+this.c.toFixed(2)+" "+this.tx.toFixed(2)+"|\n|"+this.b.toFixed(2)+" "+this.d.toFixed(2)+" "+this.ty.toFixed(2)+"|\n|0.00 0.00 1.00|"},s.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},s.prototype.prepend=function(e){var t=e.a,i=e.b,r=e.c,n=e.d;if(1!==t||0!==i||0!==r||1!==n){var s=this.a,o=this.c;this.a=s*t+this.b*r,this.b=s*i+this.b*n,this.c=o*t+this.d*r,this.d=o*i+this.d*n;var a=this.tx;this.tx=a*t+this.ty*r+e.tx,this.ty=a*i+this.ty*n+e.ty}else this.tx+=e.tx,this.ty+=e.ty;return this},s.prototype.invert=function(){var e=this.a,t=this.b,i=this.c,r=this.d,n=this.tx,s=1/(e*r-t*i);return this.a=r*s,this.b=-t*s,this.c=-i*s,this.d=e*s,this.tx=(i*this.ty-r*n)*s,this.ty=(t*n-e*this.ty)*s,this},s.prototype.transformPoint=function(e,t){t=t||new Vec2;var i=e.x;return t.x=this.a*i+this.c*e.y+this.tx,t.y=this.b*i+this.d*e.y+this.ty,t},s.prototype.getScale=function(e){return e=e||new Vec2,e.x=Math.sqrt(this.a*this.a+this.b*this.b),e.y=Math.sqrt(this.c*this.c+this.d*this.d),e},s.prototype.getTRS=function(){var e=0,t=this.getScale(),i=0!==this.a&&this.a===-this.d&&0===this.b&&0===this.c;return i?this.a<0?t.x=-t.x:t.y=-t.y:e=this.getRotation(),{translation:new Fire.Vec2(this.tx,this.ty),rotation:e,scale:t}},s.prototype.setScale=function(e){var t=this.getScale(),i=e.x/t.x,r=e.y/t.y;return this.a*=i,this.b*=i,this.c*=r,this.d*=r,this},s.prototype.getRotation=function(){var e=this.b/this.a!==-this.c/this.d;return e?.5*(Math.atan2(this.b,this.a)+Math.atan2(-this.c,this.d)):Math.atan2(-this.c,this.d)},s.prototype.getTranslation=function(e){return e=e||new Vec2,e.x=this.tx,e.y=this.ty,e},s.prototype.rotate=function(e){var t=Math.sin(e),i=Math.cos(e),r=this.a,n=this.b;return this.a=r*i+this.c*t,this.b=n*i+this.d*t,this.c=this.c*i-r*t,this.d=this.d*i-n*t,this}},{"../js":27,"./value-type":45}],44:[function(e,t,i){var r=e("./value-type"),n=e("../js"),s=function(){function e(e,t,i,r){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0,this.width="number"==typeof i?i:0,this.height="number"==typeof r?r:0}return n.extend(e,r),Fire._fastDefine("Fire.Rect",e,["x","y","width","height"]),e.fromMinMax=function(t,i){var r=Math.min(t.x,i.x),n=Math.min(t.y,i.y),s=Math.max(t.x,i.x),o=Math.max(t.y,i.y);return new e(r,n,s-r,o-n)},e.fromVec2=function(t,i){return new e(t.x,t.y,i.x,i.y)},e.contain=function(e,t){return e.x<=t.x&&e.x+e.width>=t.x+t.width&&e.y<=t.y&&e.y+e.height>=t.y+t.height?1:t.x<=e.x&&t.x+t.width>=e.x+e.width&&t.y<=e.y&&t.y+t.height>=e.y+e.height?-1:0},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.equals=function(e){return e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},e.prototype.lerp=function(t,i,r){r=r||new e;var n=this.x,s=this.y,o=this.width,a=this.height;return r.x=n+(t.x-n)*i,r.y=s+(t.y-s)*i,r.width=o+(t.width-o)*i,r.height=a+(t.height-a)*i,r},e.prototype.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},Object.defineProperty(e.prototype,"xMin",{get:function(){return this.x},set:function(e){this.width+=this.x-e,this.x=e}}),Object.defineProperty(e.prototype,"yMin",{get:function(){return this.y},set:function(e){this.height+=this.y-e,this.y=e}}),Object.defineProperty(e.prototype,"xMax",{get:function(){return this.x+this.width},set:function(e){this.width=e-this.x}}),Object.defineProperty(e.prototype,"yMax",{get:function(){return this.y+this.height},set:function(e){this.height=e-this.y}}),Object.defineProperty(e.prototype,"center",{get:function(){return new Fire.Vec2(this.x+.5*this.width,this.y+.5*this.height)},set:function(e){this.x=e.x-.5*this.width,this.y=e.y-.5*this.height}}),Object.defineProperty(e.prototype,"size",{get:function(){return new Fire.Vec2(this.width,this.height)},set:function(e){this.width=e.x,this.height=e.y}}),e.prototype.intersects=function(e){return Fire.Intersection.rectRect(this,e)},e.prototype.contains=function(e){return this.x<=e.x&&this.x+this.width>=e.x&&this.y<=e.y&&this.y+this.height>=e.y?!0:!1},e.prototype.containsRect=function(e){return this.x<=e.x&&this.x+this.width>=e.x+e.width&&this.y<=e.y&&this.y+this.height>=e.y+e.height?!0:!1},e}();Fire.Rect=s,Fire.rect=function(e,t,i,r){return Array.isArray(e)?new s(e[0],e[1],e[2],e[3]):new s(e,t,i,r)}},{"../js":27,"./value-type":45}],45:[function(e,t,i){function r(){}var n=e("../js");n.setClassName("Fire.ValueType",r),n.mixin(r.prototype,{clone:function(){return Fire.error("%.clone not yet implemented.",n.getClassName(this)),null},equals:function(e){return Fire.error("%.equals not yet implemented.",n.getClassName(this)),!1},toString:function(){return"[object Object]"},lerp:function(e,t){return this.clone()}}),Fire.ValueType=r,Fire.isValueType=function(e){return e instanceof r},t.exports=r},{"../js":27}],46:[function(e,t,i){function r(e,t){this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0}var n=e("./value-type"),s=e("../js");s.extend(r,n),Fire._fastDefine("Fire.Vec2",r,["x","y"]),s.mixin(r.prototype,{clone:function(){return new r(this.x,this.y)},set:function(e){return this.x=e.x,this.y=e.y,this},equals:function(e){return e&&this.x===e.x&&this.y===e.y},toString:function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+")"},lerp:function(e,t,i){i=i||new r;var n=this.x,s=this.y;return i.x=n+(e.x-n)*t,i.y=s+(e.y-s)*t,i},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this},add:function(e,t){return t=t||new r,t.x=this.x+e.x,t.y=this.y+e.y,t},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this},sub:function(e,t){return t=t||new r,t.x=this.x-e.x,t.y=this.y-e.y,t},mulSelf:function(e){return this.x*=e,this.y*=e,this},mul:function(e,t){return t=t||new r,t.x=this.x*e,t.y=this.y*e,t},scaleSelf:function(e){return this.x*=e.x,this.y*=e.y,this},scale:function(e,t){return t=t||new r,t.x=this.x*e.x,t.y=this.y*e.y,t},divSelf:function(e){return this.x/=e.x,this.y/=e.y,this},div:function(e,t){return t=t||new r,t.x=this.x/e.x,t.y=this.y/e.y,t},negSelf:function(){return this.x=-this.x,this.y=-this.y,this},neg:function(e){return e=e||new r,e.x=-this.x,e.y=-this.y,e},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.y*e.x-this.x*e.y},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},magSqr:function(){return this.x*this.x+this.y*this.y},normalizeSelf:function(){var e=this.x*this.x+this.y*this.y;if(1===e)return this;if(0===e)return console.warn("Can't normalize zero vector"),this;var t=1/Math.sqrt(e);return this.x*=t,this.y*=t,this},normalize:function(e){return e=e||new r,e.x=this.x,e.y=this.y,e.normalizeSelf(),e},angle:function(e){var t=this.magSqr(),i=e.magSqr();if(0===t||0===i)return console.warn("Can't get angle between zero vector"),0;var r=this.dot(e),n=r/Math.sqrt(t*i);return n=Math.clamp(n,-1,1),Math.acos(n)},signAngle:function(e){return Math.atan2(this.y,this.x)-Math.atan2(e.y,e.x)},rotate:function(e,t){return t=t||new r,t.x=this.x,t.y=this.y,t.rotateSelf(e)},rotateSelf:function(e){var t=Math.sin(e),i=Math.cos(e),r=this.x;return this.x=i*r-t*this.y,this.y=t*r+i*this.y,this}}),s.get(r,"one",function(){return new r(1,1)}),s.get(r,"zero",function(){return new r(0,0)}),s.get(r,"up",function(){return new r(0,1)}),s.get(r,"right",function(){return new r(1,0)}),Fire.Vec2=r,Fire.v2=function(e,t){return Array.isArray(e)?new r(e[0],e[1]):new r(e,t)}},{"../js":27,"./value-type":45}],47:[function(e,t,i){var r=function(e){var t=Fire(e),i=t.childrenN;return t.constructor.canHaveChildrenInEditor?{name:t.name,id:t.uuid,children:i.length>0?i.map(r):null}:{name:t.name,id:t.uuid,children:[],canHaveChildren:!1}};Editor.getHierarchyDump=function(){var e=Fire.engine.getCurrentSceneN(),t=Fire(e).childrenN;return t.map(r)},t.exports=Editor.getHierarchyDump},{}],48:[function(e,t,i){function r(e){return"object"==typeof e&&(e=e.constructor),h.getClassName(e)}function n(e,t,i){var n=i.ctor;if(n){var s=r(n);if(t.type=s,!e[s]){var u=Fire.isChildClassOf(n,Fire.RawAsset),l=Fire.isChildClassOf(n,Fire.Runtime.NodeWrapper);u||l?a(e,n,s):o(e,n,s)}}else i.type&&(t.type=i.type);i.readonly&&(t.readonly=i.readonly),i.hasOwnProperty("default")?t["default"]=i["default"]:i.hasSetter===!1&&(t.readonly=!1),i.hasOwnProperty("visible")&&(t.visible=i.visible),i.enumList&&(t.enumList=i.enumList),i.hasOwnProperty("displayName")&&(t.displayName=i.displayName),i.hasOwnProperty("multiline")&&(t.multiline=i.multiline),i.hasOwnProperty("min")&&(t.min=i.min),i.hasOwnProperty("max")&&(t.max=i.max),i.nullable&&(t.nullable=i.nullable),i.tooltip&&(t.tooltip=i.tooltip)}function s(e){for(var t,i=[],n=e;n!==e&&(t=r(n),t&&i.push(t)),n.$super;)n=n.$super;for(var s=Object.getPrototypeOf(n.prototype);s;)n=s.constructor,n&&n!==e&&(t=r(n),t&&i.push(t)),s=Object.getPrototypeOf(n.prototype);return i}function o(e,t,i){var r;if("object"==typeof t){var o=Fire.isEnumType(t);if(o){var a=Fire.getEnumList(t);return a}r=t.constructor}else r=t;var u={};if(e[i]=u,r){var l=s(r);l.length>0&&(u["extends"]=l);var c=r.__props__;if(c){for(var f={},d=0;d<c.length;d++){var h=c[d],p={},y=Fire.attr(r,h);y&&n(e,p,y),f[h]=p}u.properties=f}}}function a(e,t,i){var r={},n=s(t);n.length>0&&(r["extends"]=n),e[i]=r}function u(e,t,i){var n=r(t);if(n){var s=e[n];if(s)return s.properties[i].type}}function l(e,t,i){if(!t)return null;var n,s=t.constructor;if(t instanceof FObject){if(!t.isValid)return null;var u=t._uuid;if(u)return n=r(t),i!==n?(e[n]||a(e,s,n),{__type__:n,uuid:u}):{uuid:u};if(t instanceof Fire.Runtime.NodeWrapper)return n=r(t),i!==n?(e[n]||a(e,s,n),{__type__:n,uuid:t.uuid,name:t.name}):{uuid:t.uuid,name:t.name}}else if(t instanceof Fire.ValueType){var l=Editor.serialize(t,{stringify:!1});return e[l.__type__]||a(e,s,l.__type__),l}if(Fire._isFireClass(s)){var c={};return n=r(t),i!==n&&(e[n]||o(e,s,n),c.__type__=n),f(e,c,t,s),c}return null}function c(e,t,i,r){if(null==t||"string"==typeof t){var n=Fire.attr(i,r),s=n&&n.ctor;if(s&&"function"==typeof s&&Fire.isChildClassOf(s,Fire.RawAsset)&&n.saveUrlAsAsset)return{uuid:t&&Editor.urlToUuid(t)||""}}if("object"==typeof t){var o=u(e,i,r);return l(e,t,o)}return"function"!=typeof t?t:null}function f(e,t,i,r){var n=r.__props__;if(n)for(var s=0;s<n.length;s++){var o=n[s];t[o]=c(e,i[o],r,o)}}function d(e,t){var i={},n=r(t);n&&(i.__type__=n,o(e,t,n)),f(e,i,t,t.constructor);var s=t.targetN._mixinClasses;if(s){i.__mixins__=[];for(var a=0;a<s.length;a++){var u=s[a];if(n=r(u)){o(e,u,n);var l={__type__:n};f(e,l,t.targetN,u),i.__mixins__.push(l)}}}return i}var h=Fire.JS;Editor.getNodeDump=function(e){var t={};if(!e)return{types:t,value:null};var i=Fire(e),r=d(t,i);return{types:t,value:r}},t.exports=Editor.getNodeDump,Editor.getNodeDump.getInheritanceChain=s},{}],49:[function(e,t,i){var r="undefined"!=typeof global?global:window;r.Editor||(r.Editor={}),Editor.assets=Editor.assets||{},Editor.assets.asset=Fire.RawAsset,e("./serialize"),e("./get-node-dump"),e("./get-hierarchy-dump"),e("./set-property-by-path"),e("./utils"),e("./uuid-utils"),Fire.log=Editor.log,Fire.info=Editor.info,Fire.warn=Editor.warn,Fire.error=Editor.error,Editor.isCoreLevel&&(Editor.nodeCreateMenu=null),t.exports=Editor},{"./get-hierarchy-dump":47,"./get-node-dump":48,"./serialize":51,"./set-property-by-path":52,"./utils":53,"./uuid-utils":54}],50:[function(e,t,i){var r=function(){this.objList=[],this.keyList=[],this.referncedIDList=[],this.referencedCounts=[],this.temporaryDataList=[]},n=function(e){var t=e[0];if("undefined"!=typeof t){var i=new r;i.referencedCounts=new Array(e.length);var n,o,a,u,l,c=e.slice();s(t,e,i);var f=0;for(f=0;f<i.temporaryDataList.length;f++)delete i.temporaryDataList[f]._iN$t;for(f=0;f<i.objList.length;f++)if(o=i.objList[f],n=i.referncedIDList[f],a=i.keyList[f],u=c[n],l=i.referencedCounts[n]>1,!l){o[a]=u;var d=e.indexOf(u);e.splice(d,1)}for(f=0;f<i.objList.length;f++)if(n=i.referncedIDList[f],a=i.keyList[f],o=i.objList[f],l=i.referencedCounts[n]>1){u=c[n];var h=e.indexOf(u);o[a].__id__=h}}},s=function(e,t,i){if("object"==typeof e){if(e._iN$t=!0,i.temporaryDataList.push(e),e.content){var r=e.__type__&&Fire.JS._getClassById(e.__type__);if(r&&r.prototype._serialize)return}var n;if(Array.isArray(e))for(var s=0;s<e.length;s++)n=e[s],n&&o(n,s,e,t,i);else for(var a in e)n=e[a],n&&o(n,a,e,t,i)}},o=function(e,t,i,r,n){var o,a=e.__id__,u="undefined"!=typeof a;u&&(e=r[a],o=-1!==n.referncedIDList.indexOf(a),o?n.referencedCounts[a]++:n.referencedCounts[a]=1,n.referncedIDList.push(a),n.keyList.push(t),n.objList.push(i));var l=!e._iN$t;l?s(e,r,n):u&&n.referencedCounts[a]++};Fire._nicifySerialized=n,t.exports=n},{}],51:[function(e,t,i){function r(e){var t=e.constructor.prototype;return t.hasOwnProperty("__cid__")?t.__cid__:""}var n=e("../core/definition"),s=n.PersistentMask,o=n.DontSave,a=n.EditorOnly,u=e("../core/utils").isDomNode,l=e("./serialize-nicify"),c=function(){function e(e,t){this._exporting=t,this.serializedList=[],this._parsingObjs=[],this._parsingData=[],this._objsToResetId=[],d(this,e);for(var i=0;i<this._objsToResetId.length;++i)this._objsToResetId[i].__id__=void 0;this._parsingObjs=null,this._parsingData=null,this._objsToResetId=null}function t(e,t,i,r){var n=r.__props__;if(n)for(var s=0;s<n.length;s++){var o=n[s],a=Fire.attr(r,o);if(!e._exporting||!a.editorOnly)if(a.saveUrlAsAsset){var u=t[o];if(!u)continue;if("string"!=typeof u){Fire.error('The url must be "string" type');continue}var c=Editor.urlToUuid(u);if(!c)continue;i[o]=l(e,Editor.serialize.asAsset(c))}else a.serializable!==!1&&(i[o]=l(e,t[o]))}}var i=function(e,t){var i=e._parsingObjs.indexOf(t),n=-1!==i;if(n){var s=e.serializedList.length;t.__id__=s,e._objsToResetId.push(t);var o=e._parsingData[i];if(Array.isArray(t)===!1){var a=r(t);a&&(o.__type__=a)}return e.serializedList.push(o),o}},n=function(e,i,r){if(Array.isArray(i))for(var s=0;s<i.length;++s){var o=l(e,i[s]);"undefined"!=typeof o&&r.push(o)}else{var a,u=i.constructor,c=i._mixinClasses;if(c)for(var f=0;f<c.length;f++){var d=c[f];t(e,i,r,d)}else if(Fire._isFireClass(u))a=u.__props__,a&&("_$erialized"!==a[a.length-1]?t(e,i,r,u):(r.__type__=i._$erialized.__type__,n(e,i._$erialized,r)));else for(var h in i)!i.hasOwnProperty(h)||95===h.charCodeAt(0)&&95===h.charCodeAt(1)||(r[h]=l(e,i[h]))}},l=function(e,t){var i=typeof t;if("object"===i){if(t instanceof FObject){var r=t._objFlags;if(r&o)return void 0;if(e._exporting&&r&a)return void 0}return f(e,t)}return"function"!==i?t:null},c=function(e,t){var i;if(Array.isArray(t))i=[];else{i={};var s=r(t);s&&(i.__type__=s)}var o=e.serializedList.length;if(e._parsingObjs.push(t),e._parsingData.push(i),n(e,t,i),e._parsingObjs.pop(),e._parsingData.pop(),e.serializedList.length>o){var a=e.serializedList.indexOf(i,o);if(-1!==a)return{__id__:a}}return i},f=function(e,t){if(!t)return null;var o=t.__id__;if("undefined"!=typeof o)return{__id__:o};var a=t instanceof FObject;if(a){if(!t.isValid)return null;var l=t._uuid;if(l)return{__uuid__:l}}if(a||Fire._isFireClass(t.constructor)){o=e.serializedList.length,t.__id__=o,e._objsToResetId.push(t);var f={};e.serializedList.push(f);var d=r(t);return d&&(f.__type__=d),t._serialize?f.content=t._serialize(e._exporting):(n(e,t,f),a&&(f._objFlags&=s)),{__id__:o}}if(u&&u(t))return null;var h=i(e,t);return h?(o=t.__id__,{__id__:o}):c(e,t)},d=function(e,t){if(t instanceof FObject||Fire._isFireClass(t.constructor)){var i=t._uuid;"undefined"!=typeof i&&(t._uuid=null),f(e,t),"undefined"!=typeof i&&(t._uuid=i);

}else if("object"==typeof t&&t){if(u&&u(t))return Fire.warn(""+t+" won't be serialized"),void e.serializedList.push(null);var s;if(Array.isArray(t))s=[];else{s={};var o=r(t);o&&(s.__type__=o)}t.__id__=0,e._objsToResetId.push(t),e.serializedList.push(s),n(e,t,s)}else e.serializedList.push(f(e,t))};return e}();Editor.serialize=function(e,t){var i=t&&t.exporting,r=t&&"stringify"in t?t.stringify:!0,n=t&&"minify"in t?t.minify:!1,s=n||t&&t.nicify,o=new c(e,i),a=o.serializedList;s&&l(a);var u;return u=1!==a.length||Array.isArray(a[0])?a:a[0],r===!1?u:JSON.stringify(u,null,n?0:2)},Editor.serialize.asAsset=function(e){e||Fire.error("[Editor.serialize.asAsset] The uuid must be non-nil!");var t=new Fire.Asset;return t._uuid=e,t},Editor.serialize.setName=function(e,t){Array.isArray(e)?e[0]._name=t:e._name=t},t.exports=Editor.serialize},{"../core/definition":18,"../core/utils":40,"./serialize-nicify":50}],52:[function(e,t,i){function r(e,t,i,r){if(t.endsWith("Uuid"))return void(e[t]=i);if(i){var n=!Fire.isChildClassOf(r,Fire.Asset);n?Fire.AssetLibrary._queryAssetInfoInEditor(i,function(i,r){e[t]=r,Fire.engine.repaintInEditMode()}):Fire.AssetLibrary.loadAsset(i,function(i,n){return i?Editor.error("Failed to set asset",i):(n instanceof r||Editor.warn("The new %s must be instance of %s",t,Fire.JS.getClassName(r)),e[t]=n,void Fire.engine.repaintInEditMode())})}else e[t]=null}function n(e,t,i,n){var s=i.uuid,o=u.getClassByName(n);o?Fire.isChildClassOf(o,Fire.RawAsset)?r(e,t,s,o):e[t]=Fire.isChildClassOf(o,Fire.Runtime.NodeWrapper)?Fire.engine.getInstanceById(s):i:Fire.warn("Unknown type to apply: "+n)}function s(e,t,i,r){if(-1===t.indexOf("."))r&&"string"==typeof i.uuid?n(e,t,i,r):e[t]=i;else{for(var s=t.split("."),o=s[0],a=e[o],u=a,l=1;l<s.length-1;l++){var c=s[l];u=u[c]}var f=s[s.length-1];r&&"string"==typeof i.uuid?n(u,f,i,r):(u[f]=i,e[o]=a)}}function o(e,t){if(-1===t.indexOf("."))return e[t];for(var i=t.split("."),r=e,n=0;n<i.length;n++)if(r=r[i[n]],null==r)return Fire.warn('Failed to parse "%s", %s is nil',t,i[n]),null;return r}function a(e,t,i,r){if("object"!=typeof i||Array.isArray(i))s(e,t,i,r);else if(r&&"string"==typeof i.uuid)s(e,t,i,r);else{var n=o(e,t);for(var u in i){var l=i[u];a(n,u,l)}s(e,t,n)}}var u=Fire.JS;Editor.setPropertyByPath=s,Editor.setDeepPropertyByPath=a,t.exports=s},{}],53:[function(e,t,i){var r=!0&&e("fire-fs"),n=!0&&e("fire-url"),s=Fire.JS;Editor.urlToUuid=function(e){if(Editor.isPageLevel){var t=Fire.AssetLibrary.parseUuidInEditor(e);if(t)return t;var i=e+".meta";try{var s=r.readFileSync(n.parse(i).pathname),o=JSON.parse(s);t=o.uuid||""}catch(a){}return t}return Editor.assetdb.urlToUuid(e)},Editor.createNode=function(e,t){Fire.AssetLibrary.queryAssetInfo(e,function(i,r,n,o){return i?void t(i):void(n?o.createNodeByUrl?o.createNodeByUrl(r,t):t(new Error("Can not create node from "+s.getClassName(o))):Fire.AssetLibrary.loadAsset(e,function(e,i){e?t(e):i.createNode?i.createNode(t):t(new Error("Can not create node from "+s.getClassName(o)))}))})}},{"fire-fs":void 0,"fire-url":void 0}],54:[function(e,t,i){!function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Array(128),r=0;128>r;++r)i[r]=0;for(r=0;64>r;++r)i[t.charCodeAt(r)]=r;var n=/-/g;e.compressUuid=function(e){for(var i=e.replace(n,""),r=i.slice(0,5),s=[],o=5;32>o;o+=3){var a=parseInt(i[o],16),u=parseInt(i[o+1],16),l=parseInt(i[o+2],16);s.push(t[a<<2|u>>2]),s.push(t[(3&u)<<4|l])}return r+s.join("")},e.decompressUuid=function(e){if(23===e.length){for(var t=[],r=5;23>r;r+=2){var n=i[e.charCodeAt(r)],s=i[e.charCodeAt(r+1)];t.push((n>>2).toString(16)),t.push(((3&n)<<2|s>>4).toString(16)),t.push((15&s).toString(16))}e=e.slice(0,5)+t.join("")}return[e.slice(0,8),e.slice(8,12),e.slice(12,16),e.slice(16,20),e.slice(20)].join("-")};var s=/^[0-9a-fA-F]{32}$/,o=/^[0-9a-zA-Z+/]{23}$/;e.isUuid=function(e){return 36===e.length&&(e=e.replace(n,"")),o.test(e)||s.test(e)}}(Editor),t.exports=Editor},{}],55:[function(e,t,i){e("./polyfill");var r=e("./core");r.isWeb&&(r.Runtime=e("./runtime")),t.exports=r},{"../package.json":11,"./core":25,"./editor":49,"./polyfill":57,"./runtime":64}],56:[function(e,t,i){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,r=function(){},n=function(){return i.apply(this instanceof r?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,n.prototype=new r,n})},{}],57:[function(e,t,i){e("./bind"),e("./string")},{"./bind":56,"./string":58}],58:[function(e,t,i){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.lastIndexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){("undefined"==typeof t||t>this.length)&&(t=this.length),t-=e.length;var i=this.indexOf(e,t);return-1!==i&&i===t})},{}],59:[function(require,module,exports){var Behavior=Fire.Class({name:"Fire.Behavior",onLoad:null,update:null});Behavior.onActivated=function(e){e.onLoad&&e.onLoad()};var CallLcmOnceTmpl;CallLcmOnceTmpl=function(){for(var e=0;e<this._mixinContexts.length;e++){var t=this._mixinContexts[e];if(!(t._objFlags&_FLAG_)){var i=t._FUNC_;i&&i.call(this),t._objFlags|=_FLAG_}}this._FUNC_=null};var CallLcmTmpl;CallLcmTmpl=function(){for(var e=0;e<this._mixinContexts.length;e++){var t=this._mixinContexts[e],i=t._FUNC_;i&&i.apply(this,arguments)}};for(var LCMethods={onLoad:{tmpl:CallLcmOnceTmpl,flag:Fire._ObjectFlags.IsOnLoadCalled},onEnter:{tmpl:CallLcmTmpl},onExit:{tmpl:CallLcmTmpl},update:{tmpl:CallLcmTmpl}},LCMethodNames=Object.keys(LCMethods),LCInvokers={},j=0;j<LCMethodNames.length;j++){var name=LCMethodNames[j],info=LCMethods[name],tmpl="("+info.tmpl+")";tmpl=tmpl.replace(/_FUNC_/g,name),info.flag&&(tmpl=tmpl.replace(/_FLAG_/g,info.flag)),LCInvokers[name]=eval(tmpl)}Fire.Behavior=Behavior,Behavior.LCMethodNames=LCMethodNames,Behavior.lcmInvokers=LCInvokers,module.exports=Behavior},{}],60:[function(e,t,i){var r=Fire.JS,n=e("../wrappers/scene"),s=e("../wrappers/engine"),o=s.prototype;r.mixin(o,{getCurrentScene:function(){return Fire(this.getCurrentSceneN())},_initScene:function(e,t){e._needCreate?e.create(t):t()},_launchScene:function(e,t){var i=this;return e?(e._needCreate,i._setCurrentSceneN(this._emptySceneN),t&&t(),i.emit("pre-launch-scene"),i._setCurrentSceneN(e.targetN),void e._onActivated()):void Fire.error("Argument must be non-nil")},loadScene:function(e,t,i){if(this._loadingScene)return Fire.error('[loadScene] Failed to load scene "%s" because "%s" is already loading',e,this._loadingScene),!1;var r,n;if("string"==typeof e){e.endsWith(".fire")||(e+=".fire");for(var s=0;s<this._sceneInfos.length;s++){n=this._sceneInfos[s];var o=n.url;if(o.endsWith(e)){r=n.uuid;break}}}else{if(n=this._sceneInfos[e],"object"!=typeof n)return Fire.error("[loadScene] The scene index to load (%s) is out of range.",e),!1;r=n.uuid}return r?(this._loadingScene=e,this._loadSceneByUuid(r,t,i),!0):(Fire.error('[loadScene] Can not load the scene "%s" because it has not been added to the build settings before play.',e),!1)},_loadSceneByUuid:function(e,t,i){var r=this;Fire.AssetLibrary.loadAsset(e,function(e,s){if(e)e="Failed to load scene: "+e;else{var o=s._uuid;s=s.scene,s instanceof n?s.uuid=o:(e="The asset "+o+" is not a scene",s=null)}s?r._initScene(s,function(){r._launchScene(s,i),r._loadingScene="",t&&t(e,s)}):(Fire.error(e),r._loadingScene="",t&&t(e,s))})}})},{"../wrappers/engine":68,"../wrappers/scene":70}],61:[function(e,t,i){var r=Fire.JS,n=Fire.Behavior,s=e("../wrappers/node"),o=s.prototype;r.getset(o,"parent",function(){var e=this.parentN;return e&&Fire(e)},function(e){this.parentN=e&&e.targetN}),r.get(o,"children",function(){return this.childrenN.map(Fire)}),r.getset(o,"scenePosition",function(){var e=Fire.engine&&Fire.engine.getCurrentScene();return e?e.transformPointToLocal(this.worldPosition):(Fire.error("Can not access scenePosition if no running scene"),Fire.Vec2.zero)},function(e){var t=Fire.engine&&Fire.engine.getCurrentScene();return t?void(this.worldPosition=t.transformPointToWorld(e)):void Fire.error("Can not access scenePosition if no running scene")}),r.getset(o,"sceneRotation",function(){var e=Fire.engine&&Fire.engine.getCurrentScene();return e?this.worldRotation-e.rotation:(Fire.error("Can not access sceneRotation if no running scene"),0)},function(e){var t=Fire.engine&&Fire.engine.getCurrentScene();return t?void(this.worldRotation=t.rotation+e):void Fire.error("Can not access sceneRotation if no running scene")}),r.getset(o,"sceneScale",function(){var e=Fire.engine&&Fire.engine.getCurrentScene();return e?this.worldScale.div(e.scale):(Fire.error("Can not access sceneScale if no running scene"),Fire.Vec2.one)}),r.mixin(o,{isScene:!1,isChildOf:function(e){var t=this;do{if(t===e)return!0;t=t.parent}while(t);return!1},setAsFirstSibling:function(){this.setSiblingIndex(0)},setAsLastSibling:function(){this.setSiblingIndex(-1)},_onActivated:function(){this._onActivatedInGameMode()},_onActivatedInGameMode:function(){n.onActivated(this.targetN);for(var e=this.childrenN,t=0,i=e.length;i>t;++t){var r=e[t];Fire(r)._onActivatedInGameMode()}},_onActivatedInEditMode:function(){}})},{"../wrappers/node":69}],62:[function(e,t,i){var r=Fire.JS,n=e("../mixin").mixin,s=e("../wrappers/scene"),o=s.prototype;r.mixin(o,{isScene:!0,_initNodes:function(e,t){for(var i=0,s=e.length;s>i;i++){var o=e[i],a=o.w;a.onAfterDeserialize(),a.parentN=t.targetN;var u=o.m;if(u){var l;if(Array.isArray(u))for(var c=0;c<u.length;c++)l=r._getClassById(u[c]),l?(n(a.targetN,l),Fire.deserialize.applyMixinProps(o.t,l,a.targetN)):Fire.error("Failed to find class %s to mixin",u[c]);else l=r._getClassById(u),l?(n(a.targetN,l),Fire.deserialize.applyMixinProps(o.t,l,a.targetN)):(Editor.isUuid(u),1,Fire.error("Failed to find class %s to mixin",u))}var f=o.c;f&&this._initNodes(f,a)}},create:function(e){function t(t){i.onAfterDeserialize(),Fire.engine._isCloning=!0,i._initNodes(t,i),Fire.engine._isCloning=!1,e()}var i=this,r=this._dataToDeserialize,n=!0,s=Fire.AssetLibrary.loadJson(r,function(e,r){i._dataToDeserialize=null;var n=r.c,o=Object.keys(s.urlsNeedPreload);s.assetsNeedPostLoad.length>0||o.length>0?i.preloadAssets(s.assetsNeedPostLoad,o,function(){t(n)}):t(n)},!0,n)},_deserialize:function(e,t){this._dataToDeserialize=e,e.length>0&&(this.uuid=e[0].uuid)}}),r.get(o,"_needCreate",function(){return!!this._dataToDeserialize}),r.getset(o,"uuid",function(){return this._id},function(e){this._id=e})},{"../../editor/serialize":51,"../mixin":65,"../wrappers/scene":70}],63:[function(e,t,i){t.exports={init:function(){},onNodeAttachedToParent:function(e){},onNodeDetachedFromParent:function(e){},_debounceNodeEvent:function(){}}},{}],64:[function(e,t,i){var r={},n=e("./register"),s=e("./wrappers/node");Fire.JS.mixin(r,{NodeWrapper:s,SceneWrapper:e("./wrappers/scene"),registerNodeType:n.registerNodeType,registerMixin:n.registerMixin,EngineWrapper:e("./wrappers/engine"),registerEngine:n.registerEngine,Helpers:e("./helpers")}),e("./extends/node-extends"),e("./extends/scene-extends"),e("./extends/engine-extends");var o=e("./mixin");n.registerMixin(o),r.Settings=e("./settings"),Fire.getWrapperType=n.getWrapperType,Fire.menuToWrapper=n.menuToWrapper;var o=n.getMixinOptions();Fire.mixin=o.mixin,Fire.hasMixin=o.hasMixin,Fire.unMixin=o.unMixin,t.exports=r},{"./extends/engine-extends":60,"./extends/node-extends":61,"./extends/scene-extends":62,"./helpers":63,"./mixin":65,"./register":66,"./settings":67,"./wrappers/engine":68,"./wrappers/node":69,"./wrappers/scene":70}],65:[function(e,t,i){function r(e,t){"use strict";if(arguments.length>2)for(var i=1;i<arguments.length;i++)r(e,arguments[i]);else{var o;if("string"==typeof t?(o=n.getClassByName(t),o||(Fire.error('Fire.mixin: Failed to get class "%s"'),Fire._RFpeek()&&Fire.error("You should not mixin %s when the scripts are still loading.",t))):(t||Fire.error("Fire.mixin: The class to mixin must be non-nil"),o=t),e instanceof s&&(e=e.targetN),!e)return void Fire.error("Fire.mixin: The node to mixin must be non-nil.");a(e,o);var c,f={_objFlags:0},d=e._mixinClasses;d?(d.push(o),e._mixinContexts.push(f),c=e._mixin):(e._mixinClasses=[o],e._mixinContexts=[f],c={lcmInitStates:[]},e._mixin=c);var h=c.lcmInitStates;h.length=u.length;var p=o.prototype;for(var y in p)if("__cid__"!==y&&"__classname__"!==y&&"constructor"!==y){var g=u.indexOf(y),_=-1!==g;if(_)f[y]=p[y],h[g]||(h[g]=!0,function(){var t=l[y],i=e[y];e[y]=i?function(){i.apply(this,arguments),t.apply(this,arguments)}:t}());else{var v=n.getPropertyDescriptor(p,y);Object.defineProperty(e,y,v)}}if(Fire.engine&&(Fire.engine._isPlaying,!0)&&!Fire.engine._isCloning){var m=p.onLoad;m&&m.call(e)}}}var n=Fire.JS,s=e("./wrappers/node"),o=e("./behavior"),a=e("../core/class").instantiateProps,u=o.LCMethodNames,l=o.lcmInvokers,i={mixin:r,hasMixin:function(e,t){if(e instanceof s&&(e=e.targetN),!e)return!1;var i=e._mixinClasses;if(i){var r;if("string"==typeof t){if(r=n.getClassByName(t),!r)return Fire.error('Fire.hasMixin: Failed to get class "%s"',t),!1}else{if(!t)return!1;r=t}return-1!==i.indexOf(r)}return!1},unMixin:function(e,t){if(Fire.engine&&Fire.engine.isPlaying,!0)return Fire.warn("Fire.unMixin: Sorry, can not un-mixin when the engine is playing.");if(e instanceof s&&(e=e.targetN),!e)return Fire.error("Fire.unMixin: The node to un-mixin must be non-nil.");var i=e._mixinClasses;if(i){var r;if("string"==typeof t){if(r=n.getClassByName(t),!r)return Fire.error('Fire.unMixin: Failed to get class "%s"',t)}else{if(!t)return Fire.error("Fire.unMixin: The class to un-mixin must be non-nil");r=t}var o=i.indexOf(r);if(-1!==o)return i.splice(o,1),void e._mixinContexts.splice(o,1)}return Fire.error('Fire.unMixin: Can not find mixed class "%s" in node "%s".',t,Fire(e).name)}};t.exports=i},{"../core/class":17,"./behavior":59,"./wrappers/node":69}],66:[function(e,t,i){function r(e,t,i){return Fire.isChildClassOf(t,l)?e.prototype.hasOwnProperty("_FB_WrapperType")?void Fire.error("%s is already registered!",u(e)):(e.prototype._FB_WrapperType=t,void(i&&(f[i]=t))):void Fire.error("%s must be child class of %s!",u(t),u(l))}function n(e){c=e}function s(e){Fire.engine=e}function o(e){return"function"!=typeof e?e._FB_WrapperType:e.prototype._FB_WrapperType}var a=Fire.JS,u=a.getClassName,l=e("./wrappers/node"),c=(e("./wrappers/scene"),e("./wrappers/engine"),null),f={};t.exports={registerNodeType:r,getWrapperType:o,registerToCoreLevel:function(){},registerMixin:n,getMixinOptions:function(){return c},registerEngine:s}},{"./wrappers/engine":68,"./wrappers/node":69,"./wrappers/scene":70}],67:[function(e,t,i){t.exports={"mapping-v":[1,0,1],"mapping-h":[0,1,1]}},{}],68:[function(e,t,i){var r=(Fire.JS,Fire._Ticker),n=Fire.Time,s=e("./utils"),o=s.NYI,a=s.NYI_Accessor,u=Fire.Class({name:"Fire.Runtime.EngineWrapper","extends":Fire.Playable,constructor:function(){var e=arguments[0];this._requestId=-1,this._useDefaultMainLoop=e,this._isInitialized=!1,this._sceneInfos=[],this._loadingScene="",this._emptySceneN=null,this._bindedTick=(!1||e)&&this._tick.bind(this),this._isCloning=!1},properties:{isInitialized:{get:function(){return this._isInitialized}},loadingScene:{get:function(){return this._loadingScene}},canvasSize:a(Fire.Vec2.zero),forceRepaintIntervalInEM:{"default":500,notify:!1}},initRuntime:function(e,t){o(),t()},playRuntime:o,stopRuntime:o,pauseRuntime:o,resumeRuntime:o,updateRuntime:o,animateRuntime:o,renderRuntime:o,getCurrentSceneN:o,_setCurrentSceneN:o,tick:function(e,t){t&&(this.updateRuntime(e),this.animateRuntime(e),this.emit("post-update")),this.renderRuntime()},tickInEditMode:function(e,t){},getIntersectionList:o,init:function(e,t){if(this._isInitialized)return void Fire.error("Engine already initialized");this._isInitialized=!0,this._sceneInfos=this._sceneInfos.concat(e.scenes),Fire.Runtime.Helpers.init();var i=this;this.initRuntime(e,function(e){if(!e);t(e);var r=new(i.getCurrentScene().constructor);r.onAfterDeserialize(),i._emptySceneN=r.targetN})},repaintInEditMode:function(){},onError:function(e){},onResume:function(){this.resumeRuntime()},onPause:function(){this.pauseRuntime()},onPlay:function(){if(this.playRuntime(),this._shouldRepaintInEM=!1,this._useDefaultMainLoop){var e=r.now();n._restart(e)}},onStop:function(){this.stopRuntime(),this._loadingScene=""},_tick:function(e){this._requestId=r.requestAnimationFrame(this._bindedTick);var t=r.now();(this._isUpdating||this._stepOnce)&&(n._update(t,!1,this._stepOnce?1/60:0),this._stepOnce=!1,this.tick(n.deltaTime,!0))},_tickStart:function(){-1===this._requestId&&this._tick()},_tickStop:function(){-1!==this._requestId&&(r.cancelAnimationFrame(this._requestId),this._requestId=-1)}});t.exports=u},{"../register":66,"./utils":71}],69:[function(e,t,i){var r=(Fire.JS,Fire.Vec2),n=Fire.Rect,s=e("./utils"),o=s.NYI,a=s.NYI_Accessor,u=e("./uuid"),l={visible:!1},c="The %s must not be NaN",f=Fire.Class({name:"Fire.Runtime.NodeWrapper","extends":Fire.FObject,constructor:function(){if(this.targetN=arguments[0],this.targetN){{this.uuid}this.attached()}this.gizmo=null,this.mixinGizmos=[]},properties:{name:{get:function(){return""},set:function(e){}},_id:{"default":"",editorOnly:!0},uuid:{get:function(){return this._id||(this._id=u())},visible:!1},parentN:a(null,l),childrenN:a([],l,!0),position:a(r.zero),x:{get:function(){return this.position.x},set:function(e){if(isNaN(e))Fire.error(c,"new x");else{var t=this.position;t.x=e,this.position=t}},visible:!1},y:{get:function(){return this.position.y},set:function(e){if(isNaN(e))Fire.error(c,"new y");else{var t=this.position;t.y=e,this.position=t}},visible:!1},worldPosition:a(r.zero,l),worldX:{get:function(){return this.worldPosition.x},set:function(e){if(isNaN(e))Fire.error(c,"new worldX");else{var t=this.worldPosition;t.x=e,this.worldPosition=t}},visible:!1},worldY:{get:function(){return this.worldPosition.y},set:function(e){if(isNaN(e))Fire.error(c,"new worldY");else{var t=this.worldPosition;t.y=e,this.worldPosition=t}},visible:!1},rotation:a(0,{tooltip:"The clockwise degrees of rotation relative to the parent"}),worldRotation:a(0,l),scale:a(r.one),scaleX:{get:function(){return this.scale.x},set:function(e){if(isNaN(e))Fire.error(c,"new scaleX");else{var t=this.scale;t.x=e,this.scale=t}},visible:!1},scaleY:{get:function(){return this.scale.y},set:function(e){if(isNaN(e))Fire.error(c,"new scaleY");else{var t=this.scale;t.y=e,this.scale=t}},visible:!1},worldScale:a(r.one,l,!0),root:{get:function(){for(var e=this,t=e.parent;t;)e=t,t=t.parent;return e}}},statics:{animatableInEditor:!1,canHaveChildrenInEditor:!0},createNode:function(){return o(),null},onBeforeSerialize:function(){},onAfterDeserialize:function(){var e=this.createNode();this.targetN=e,e._FB_wrapper=this;this.attached()},attached:function(){},getSiblingIndex:function(){return Fire(this.parentN).childrenN.indexOf(this.targetN)},setSiblingIndex:function(e){var t=Fire(this.parentN).childrenN,i=this.targetN;e=-1!==e?e:t.length-1;var r=t.indexOf(i);e!==r&&(t.splice(r,1),e<t.length?t.splice(e,0,i):t.push(i))},rotateAround:function(e,t){var i=this.worldPosition.subSelf(e);i.rotateSelf(Math.deg2rad(t)),this.worldPosition=e.addSelf(i),this.rotation+=t},transformPointToWorld:o,transformPointToLocal:o,getWorldBounds:function(e){return o(),new n},getWorldOrientedBounds:function(e,t,i,n){return o(),[r.zero,r.zero,r.zero,r.zero]},onFocusInEditor:null,onLostFocusInEditor:null});Fire._setWrapperGetter(function(e){if(e instanceof f)return Fire.warn("Fire accept argument of type runtime node, not wrapper."),e;if(!e)return null;var t=e._FB_wrapper;if(!t){var i=Fire.getWrapperType(e);if(!i){var r=Fire.JS.getClassName;return Fire.error("%s not registered for %s",r(f),r(e)),null}t=new i(e),e._FB_wrapper=t}return t}),t.exports=f},{"./utils":71,"./uuid":72}],70:[function(e,t,i){var r=e("./node"),n=(e("./utils").NYI,Fire.Class({name:"Fire.Runtime.SceneWrapper","extends":r,constructor:function(){this._dataToDeserialize=null},properties:{parentN:{get:function(){return null},set:function(){}},scenePosition:{get:function(){return new Fire.Vec2(0,0)},set:function(){Fire.error("Disallow to set scene's scenePosition.")},visible:!1}},preloadAssets:function(e,t,i){i()},getSiblingIndex:function(){return 0},setSiblingIndex:function(e){}}));t.exports=n},{"./node":69,"./utils":71}],71:[function(e,t,i){function r(){}function n(e,t,i){var n={get:function(){return r(),e}};return i||(n.set=r),t?s.mixin(n,t):n}var s=Fire.JS;t.exports={NYI:r,NYI_Accessor:n}},{}],72:[function(e,t,i){t.exports=function(){return Fire.error("Can only use uuid inside editor."),""}},{"node-uuid":void 0}]},{},[1]);